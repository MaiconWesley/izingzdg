'use strict';
const _0x5ec8ba = _0x4665;
(function (_0x1e1a4d, _0x5a04d5) {
    const _0x4544ee = _0x4665, _0x28080d = _0x1e1a4d();
    while (!![]) {
        try {
            const _0x374fdd = -parseInt(_0x4544ee(0x163)) / (-0x2555 + 0x19bc + 0xb9a) + -parseInt(_0x4544ee(0x152)) / (0x234c + 0x2aa + 0x1 * -0x25f4) + -parseInt(_0x4544ee(0x15a)) / (-0x3 * -0x955 + -0x21e8 + -0x2f6 * -0x2) * (-parseInt(_0x4544ee(0x198)) / (0xafa + -0x766 + -0x390)) + parseInt(_0x4544ee(0x15b)) / (0x1 * -0x775 + -0x1 * -0x2351 + -0x1 * 0x1bd7) + parseInt(_0x4544ee(0x17e)) / (-0x1 * 0x4f5 + -0xbc7 * -0x2 + -0x1293) + parseInt(_0x4544ee(0x18f)) / (0x88 + -0x15a * 0x2 + -0x233 * -0x1) + -parseInt(_0x4544ee(0x194)) / (-0x2 * 0x605 + 0x13eb * 0x1 + 0x1 * -0x7d9);
            if (_0x374fdd === _0x5a04d5)
                break;
            else
                _0x28080d['push'](_0x28080d['shift']());
        } catch (_0x25f045) {
            _0x28080d['push'](_0x28080d['shift']());
        }
    }
}(_0x9eac, -0x81bdb + 0x4786c + 0x11064b));
var __awaiter = this && this[_0x5ec8ba(0x18a)] || function (_0x54bfc9, _0x370a78, _0x18b4f2, _0x49ff12) {
        const _0x53c99e = _0x5ec8ba, _0x48eb6e = {
                'NxkWX': function (_0x411869, _0x3148af) {
                    return _0x411869(_0x3148af);
                },
                'dIHCm': function (_0x3883bb, _0x14b198) {
                    return _0x3883bb instanceof _0x14b198;
                },
                'zPsjV': function (_0x381940, _0x553ff2) {
                    return _0x381940(_0x553ff2);
                },
                'nGBFR': _0x53c99e(0x171),
                'WZILR': function (_0x40d6bc, _0x3cceb5) {
                    return _0x40d6bc(_0x3cceb5);
                },
                'hQngh': function (_0x3111c3, _0x23e9d3) {
                    return _0x3111c3(_0x23e9d3);
                }
            };
        function _0x4ee2bf(_0x3be566) {
            const _0xfe2d5e = _0x53c99e;
            return _0x48eb6e[_0xfe2d5e(0x161)](_0x3be566, _0x18b4f2) ? _0x3be566 : new _0x18b4f2(function (_0x25102f) {
                const _0x591c1b = _0xfe2d5e;
                _0x48eb6e[_0x591c1b(0x1b6)](_0x25102f, _0x3be566);
            });
        }
        return new (_0x18b4f2 || (_0x18b4f2 = Promise))(function (_0x142f83, _0x263ac6) {
            const _0x149864 = _0x53c99e, _0x298ac6 = {
                    'wqNCw': function (_0x652ddf, _0x4d2e5) {
                        const _0x46a5d1 = _0x4665;
                        return _0x48eb6e[_0x46a5d1(0x1b2)](_0x652ddf, _0x4d2e5);
                    },
                    'oNPdH': function (_0x727d58, _0x4de5) {
                        const _0x15cfac = _0x4665;
                        return _0x48eb6e[_0x15cfac(0x1b6)](_0x727d58, _0x4de5);
                    },
                    'eepvb': _0x48eb6e[_0x149864(0x15f)],
                    'vjQKe': function (_0x923bdb, _0x1a3a5f) {
                        const _0x37214e = _0x149864;
                        return _0x48eb6e[_0x37214e(0x1bd)](_0x923bdb, _0x1a3a5f);
                    }
                };
            function _0xc5cbb1(_0x39190b) {
                const _0x4d1d81 = _0x149864;
                try {
                    _0x298ac6[_0x4d1d81(0x1af)](_0x12e59d, _0x49ff12[_0x4d1d81(0x173)](_0x39190b));
                } catch (_0x48fae3) {
                    _0x298ac6[_0x4d1d81(0x1af)](_0x263ac6, _0x48fae3);
                }
            }
            function _0x46c3a7(_0x52afc1) {
                const _0x208bed = _0x149864;
                try {
                    _0x298ac6[_0x208bed(0x1a8)](_0x12e59d, _0x49ff12[_0x298ac6[_0x208bed(0x1b4)]](_0x52afc1));
                } catch (_0x2a387d) {
                    _0x298ac6[_0x208bed(0x1af)](_0x263ac6, _0x2a387d);
                }
            }
            function _0x12e59d(_0x1e6c56) {
                const _0x46b281 = _0x149864;
                _0x1e6c56[_0x46b281(0x17c)] ? _0x298ac6[_0x46b281(0x175)](_0x142f83, _0x1e6c56[_0x46b281(0x188)]) : _0x298ac6[_0x46b281(0x1a8)](_0x4ee2bf, _0x1e6c56[_0x46b281(0x188)])[_0x46b281(0x16a)](_0xc5cbb1, _0x46c3a7);
            }
            _0x48eb6e[_0x149864(0x180)](_0x12e59d, (_0x49ff12 = _0x49ff12[_0x149864(0x156)](_0x54bfc9, _0x370a78 || []))[_0x149864(0x173)]());
        });
    }, __importDefault = this && this[_0x5ec8ba(0x157) + _0x5ec8ba(0x158)] || function (_0x26a295) {
        const _0x47035c = _0x5ec8ba;
        return _0x26a295 && _0x26a295[_0x47035c(0x1a3)] ? _0x26a295 : { 'default': _0x26a295 };
    };
function _0x4665(_0x41a9a7, _0xf82c5) {
    const _0x1ff44c = _0x9eac();
    return _0x4665 = function (_0x5ccfbe, _0xcd34e8) {
        _0x5ccfbe = _0x5ccfbe - (0x178a + 0xbd * 0x1 + -0x1701);
        let _0x3f6c58 = _0x1ff44c[_0x5ccfbe];
        return _0x3f6c58;
    }, _0x4665(_0x41a9a7, _0xf82c5);
}
const _0x198bd9 = {};
function _0x9eac() {
    const _0x46c6ca = [
        'EvVrm',
        'eepvb',
        'hqgIX',
        'NxkWX',
        'contact',
        'tqhhb',
        'EmitZPRO',
        'MJGLQ',
        'ZPRO',
        'iBVRf',
        'WZILR',
        'sended',
        'video',
        'pZPRO',
        'alAZa',
        'ls/Message',
        'messageId',
        'defineProp',
        'mrCAt',
        'type',
        'applicatio',
        'OAwSP',
        'createdAt',
        '620908MYNlaz',
        'ls/Whatsap',
        'geKPN',
        'ketMessage',
        'apply',
        '__importDe',
        'fault',
        'MZQKU',
        '40263HDxZOp',
        '6993785YyNJar',
        'zkrqa',
        'mCMfI',
        '../../mode',
        'nGBFR',
        'VWuls',
        'dIHCm',
        './SentMess',
        '1004633HpaahN',
        'ers/SetTic',
        'update',
        'image',
        'lsiXZ',
        'body',
        'number',
        'then',
        'ASC',
        'CyMdA',
        'chat:ack',
        'apiKey',
        'text',
        'QRwvP',
        'throw',
        'OgRAa',
        'next',
        'dataValues',
        'vjQKe',
        'ack',
        'whatsapp',
        'message',
        'lte',
        'uKKcq',
        'pending',
        'done',
        'findAll',
        '9802008qKYPXf',
        'includes',
        'hQngh',
        'PRO',
        'assign',
        'mKacN',
        'status',
        'qIMqJ',
        'default',
        'chat',
        'value',
        'timestamp',
        '__awaiter',
        'tenantId',
        'VXtnn',
        'wabaMediaI',
        'ls/TicketZ',
        '6155345APyOIW',
        'mediaType',
        'mediaName',
        'sequelize',
        'tokenAPI',
        '17942528NhmnYw',
        'document',
        'quotedMsg',
        'yQSbJ',
        '156eIdABW',
        'mediaUrl',
        'caption',
        'ers/socket',
        'KvwFS',
        'bGpPn',
        'audio',
        'RzunY',
        'messages',
        '../../help',
        'ageZPRO',
        '__esModule',
        'voice',
        'GfZdL',
        'erty',
        'individual',
        'oNPdH',
        'UwxUy',
        'sAsReadZPR',
        '360',
        'waba',
        'iRwhI',
        'ticket',
        'wqNCw',
        'VtTGj',
        'where',
        'zPsjV'
    ];
    _0x9eac = function () {
        return _0x46c6ca;
    };
    return _0x9eac();
}
_0x198bd9[_0x5ec8ba(0x188)] = !![], Object[_0x5ec8ba(0x14c) + _0x5ec8ba(0x1a6)](exports, _0x5ec8ba(0x1a3), _0x198bd9);
const sequelize_1 = require(_0x5ec8ba(0x192)), SetTicketMessagesAsReadZPRO_1 = __importDefault(require(_0x5ec8ba(0x1a1) + _0x5ec8ba(0x164) + _0x5ec8ba(0x155) + _0x5ec8ba(0x1aa) + 'O')), socketEmitZPRO_1 = __importDefault(require(_0x5ec8ba(0x1a1) + _0x5ec8ba(0x19b) + _0x5ec8ba(0x1b9))), MessageZPRO_1 = __importDefault(require(_0x5ec8ba(0x15e) + _0x5ec8ba(0x14a) + _0x5ec8ba(0x1bb))), TicketZPRO_1 = __importDefault(require(_0x5ec8ba(0x15e) + _0x5ec8ba(0x18e) + _0x5ec8ba(0x181))), WhatsappZPRO_1 = __importDefault(require(_0x5ec8ba(0x15e) + _0x5ec8ba(0x153) + _0x5ec8ba(0x148))), SentMessageZPRO_1 = __importDefault(require(_0x5ec8ba(0x162) + _0x5ec8ba(0x1a2))), buildWabaMessage360 = (_0x451c08, _0x5e95ab) => __awaiter(void (0x1e1a * 0x1 + 0x4b5 + -0x22cf), void (0x18e0 + -0x1 * -0x21ff + -0x3adf), void (0x1 * 0xaf6 + -0x225 * -0x8 + 0x1c1e * -0x1), function* () {
        const _0x247e08 = _0x5ec8ba, _0x5e587f = {
                'KvwFS': function (_0x30e388, _0x57db3a) {
                    return _0x30e388(_0x57db3a);
                },
                'QRwvP': _0x247e08(0x1a7),
                'VtTGj': _0x247e08(0x16f),
                'iRwhI': function (_0x5b1bb8, _0x247603) {
                    return _0x5b1bb8 === _0x247603;
                },
                'hqgIX': _0x247e08(0x14f) + 'n',
                'OAwSP': function (_0x4cde1a, _0x43b35d) {
                    return _0x4cde1a === _0x43b35d;
                },
                'mrCAt': _0x247e08(0x195),
                'VWuls': _0x247e08(0x166),
                'VXtnn': function (_0x1860d0, _0x3d2177) {
                    return _0x1860d0 === _0x3d2177;
                },
                'yQSbJ': _0x247e08(0x147),
                'zkrqa': function (_0x3b71e6, _0x157853) {
                    return _0x3b71e6 === _0x157853;
                },
                'RzunY': _0x247e08(0x19e),
                'tqhhb': _0x247e08(0x1a4),
                'GfZdL': _0x247e08(0x187),
                'geKPN': function (_0x3ca4be, _0x1a8468) {
                    return _0x3ca4be === _0x1a8468;
                }
            };
        let _0x7bffb9 = {
            'timestamp': _0x5e587f[_0x247e08(0x19c)](String, _0x451c08[_0x247e08(0x189)]),
            'recipient_type': _0x5e587f[_0x247e08(0x170)],
            'to': _0x5e95ab,
            'type': _0x5e587f[_0x247e08(0x1b0)]
        };
        if (_0x5e587f[_0x247e08(0x1ad)](_0x451c08[_0x247e08(0x190)], _0x5e587f[_0x247e08(0x1b5)]) || _0x5e587f[_0x247e08(0x150)](_0x451c08[_0x247e08(0x190)], _0x5e587f[_0x247e08(0x14d)])) {
            const _0x590865 = {};
            _0x590865['id'] = _0x451c08[_0x247e08(0x18d) + 'd'], _0x590865[_0x247e08(0x19a)] = _0x451c08[_0x247e08(0x168)] || _0x451c08[_0x247e08(0x191)] || '' || '';
            const _0x543fa3 = {};
            _0x543fa3[_0x247e08(0x14e)] = _0x5e587f[_0x247e08(0x14d)], _0x543fa3[_0x247e08(0x195)] = _0x590865, _0x7bffb9 = Object[_0x247e08(0x182)](Object[_0x247e08(0x182)]({}, _0x7bffb9), _0x543fa3);
        }
        if (_0x5e587f[_0x247e08(0x1ad)](_0x451c08[_0x247e08(0x190)], _0x5e587f[_0x247e08(0x160)])) {
            const _0x470cae = {};
            _0x470cae['id'] = _0x451c08[_0x247e08(0x18d) + 'd'], _0x470cae[_0x247e08(0x19a)] = _0x451c08[_0x247e08(0x168)] || _0x451c08[_0x247e08(0x191)] || '';
            const _0x4e2430 = {};
            _0x4e2430[_0x247e08(0x14e)] = _0x5e587f[_0x247e08(0x160)], _0x4e2430[_0x247e08(0x166)] = _0x470cae, _0x7bffb9 = Object[_0x247e08(0x182)](Object[_0x247e08(0x182)]({}, _0x7bffb9), _0x4e2430);
        }
        if (_0x5e587f[_0x247e08(0x18c)](_0x451c08[_0x247e08(0x190)], _0x5e587f[_0x247e08(0x197)])) {
            const _0x22f31a = {};
            _0x22f31a['id'] = _0x451c08[_0x247e08(0x18d) + 'd'], _0x22f31a[_0x247e08(0x19a)] = _0x451c08[_0x247e08(0x168)] || _0x451c08[_0x247e08(0x191)] || '';
            const _0x5d5883 = {};
            _0x5d5883[_0x247e08(0x14e)] = _0x5e587f[_0x247e08(0x197)], _0x5d5883[_0x247e08(0x147)] = _0x22f31a, _0x7bffb9 = Object[_0x247e08(0x182)](Object[_0x247e08(0x182)]({}, _0x7bffb9), _0x5d5883);
        }
        if (_0x5e587f[_0x247e08(0x15c)](_0x451c08[_0x247e08(0x190)], _0x5e587f[_0x247e08(0x19f)]) || _0x5e587f[_0x247e08(0x150)](_0x451c08[_0x247e08(0x190)], _0x5e587f[_0x247e08(0x1b8)])) {
            const _0x3225d9 = {};
            _0x3225d9['id'] = _0x451c08[_0x247e08(0x18d) + 'd'], _0x3225d9[_0x247e08(0x19a)] = _0x451c08[_0x247e08(0x168)] || _0x451c08[_0x247e08(0x191)] || '';
            const _0x1574ad = {};
            _0x1574ad[_0x247e08(0x14e)] = _0x5e587f[_0x247e08(0x19f)], _0x1574ad[_0x247e08(0x19e)] = _0x3225d9, _0x7bffb9 = Object[_0x247e08(0x182)](Object[_0x247e08(0x182)]({}, _0x7bffb9), _0x1574ad);
        }
        if (_0x5e587f[_0x247e08(0x15c)](_0x451c08[_0x247e08(0x190)], _0x5e587f[_0x247e08(0x1a5)]) || _0x5e587f[_0x247e08(0x154)](_0x451c08[_0x247e08(0x190)], _0x5e587f[_0x247e08(0x1b0)])) {
            const _0x36ab18 = {};
            _0x36ab18[_0x247e08(0x168)] = _0x451c08[_0x247e08(0x168)];
            const _0x2b9f25 = {};
            _0x2b9f25[_0x247e08(0x16f)] = _0x36ab18, _0x7bffb9 = Object[_0x247e08(0x182)](Object[_0x247e08(0x182)]({}, _0x7bffb9), _0x2b9f25);
        }
        return _0x7bffb9;
    }), _0x3c93e4 = { [sequelize_1['Op']['is']]: null }, where = {
        'fromMe': !![],
        'messageId': _0x3c93e4,
        'status': _0x5ec8ba(0x17b),
        [sequelize_1['Op']['or']]: [
            { 'scheduleDate': { [sequelize_1['Op'][_0x5ec8ba(0x179)]]: new Date() } },
            { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
        ]
    }, Waba360SendMessagesSystem = _0x4a30bc => __awaiter(void (-0x7f7 * -0x2 + -0xd * 0x28e + -0x278 * -0x7), void (-0x3 * 0x911 + -0xc19 + 0x13a6 * 0x2), void (-0x133 * 0x15 + -0x509 + 0x1e38), function* () {
        const _0x47b74e = _0x5ec8ba, _0x42fc83 = {
                'MZQKU': _0x47b74e(0x1b7),
                'qIMqJ': _0x47b74e(0x1ae),
                'uKKcq': _0x47b74e(0x1ac),
                'mKacN': _0x47b74e(0x177),
                'alAZa': _0x47b74e(0x1ab),
                'EvVrm': _0x47b74e(0x196),
                'mCMfI': _0x47b74e(0x151),
                'MJGLQ': _0x47b74e(0x16b),
                'OgRAa': function (_0x221978, _0x1fddb9) {
                    return _0x221978(_0x1fddb9);
                },
                'CyMdA': _0x47b74e(0x16f),
                'iBVRf': _0x47b74e(0x187),
                'lsiXZ': function (_0x1c87f1, _0xc24944, _0x547689) {
                    return _0x1c87f1(_0xc24944, _0x547689);
                },
                'UwxUy': _0x47b74e(0x146),
                'bGpPn': _0x47b74e(0x16d)
            }, _0x457ec6 = yield MessageZPRO_1[_0x47b74e(0x186)][_0x47b74e(0x17d)]({
                'where': where,
                'include': [
                    _0x42fc83[_0x47b74e(0x159)],
                    {
                        'model': TicketZPRO_1[_0x47b74e(0x186)],
                        'as': _0x42fc83[_0x47b74e(0x185)],
                        'where': {
                            'tenantId': _0x4a30bc[_0x47b74e(0x18b)],
                            'channel': _0x42fc83[_0x47b74e(0x17a)]
                        },
                        'include': [
                            _0x42fc83[_0x47b74e(0x159)],
                            {
                                'model': WhatsappZPRO_1[_0x47b74e(0x186)],
                                'as': _0x42fc83[_0x47b74e(0x183)],
                                'where': {
                                    'id': _0x4a30bc['id'],
                                    'type': _0x42fc83[_0x47b74e(0x17a)],
                                    'wabaBSP': _0x42fc83[_0x47b74e(0x149)]
                                }
                            }
                        ]
                    },
                    {
                        'model': MessageZPRO_1[_0x47b74e(0x186)],
                        'as': _0x42fc83[_0x47b74e(0x1b3)],
                        'include': [_0x42fc83[_0x47b74e(0x159)]]
                    }
                ],
                'order': [[
                        _0x42fc83[_0x47b74e(0x15d)],
                        _0x42fc83[_0x47b74e(0x1ba)]
                    ]]
            });
        for (const _0x403b0e of _0x457ec6) {
            const {ticket: _0x56721b} = _0x403b0e, _0x846085 = _0x42fc83[_0x47b74e(0x172)](String, _0x56721b[_0x47b74e(0x1b7)][_0x47b74e(0x169)]);
            if (![
                    _0x42fc83[_0x47b74e(0x16c)],
                    _0x42fc83[_0x47b74e(0x1bc)]
                ][_0x47b74e(0x17f)](_0x403b0e[_0x47b74e(0x190)]) && _0x403b0e[_0x47b74e(0x199)] && !_0x403b0e[_0x47b74e(0x18d) + 'd']) {
            }
            const _0x50b140 = yield _0x42fc83[_0x47b74e(0x167)](buildWabaMessage360, _0x403b0e, _0x846085), _0x4ebaa9 = {};
            _0x4ebaa9[_0x47b74e(0x178)] = _0x50b140, _0x4ebaa9[_0x47b74e(0x16e)] = _0x4a30bc[_0x47b74e(0x193)];
            const _0xba60e5 = yield (0x256c + -0x11f * -0x1f + -0x482d, SentMessageZPRO_1[_0x47b74e(0x186)])(_0x4ebaa9), _0x2488f5 = {};
            _0x2488f5[_0x47b74e(0x14b)] = _0xba60e5[_0x47b74e(0x1a0)][0x612 + 0x26f5 + -0x2d07]['id'], _0x2488f5[_0x47b74e(0x184)] = _0x42fc83[_0x47b74e(0x1a9)], _0x2488f5[_0x47b74e(0x176)] = 0x2;
            const _0x372a2e = Object[_0x47b74e(0x182)](Object[_0x47b74e(0x182)]({}, _0x403b0e), _0x2488f5), _0x8e6c8 = {};
            _0x8e6c8['id'] = _0x403b0e['id'];
            const _0x27c2c6 = {};
            _0x27c2c6[_0x47b74e(0x1b1)] = _0x8e6c8, yield MessageZPRO_1[_0x47b74e(0x186)][_0x47b74e(0x165)](Object[_0x47b74e(0x182)]({}, _0x372a2e), _0x27c2c6), (-0x13b + -0x210d * -0x1 + -0xfe9 * 0x2, socketEmitZPRO_1[_0x47b74e(0x186)])({
                'tenantId': _0x56721b[_0x47b74e(0x18b)],
                'type': _0x42fc83[_0x47b74e(0x19d)],
                'payload': Object[_0x47b74e(0x182)](Object[_0x47b74e(0x182)]({}, _0x372a2e[_0x47b74e(0x174)]), {
                    'mediaUrl': _0x403b0e[_0x47b74e(0x199)],
                    'messageId': _0x372a2e[_0x47b74e(0x14b)],
                    'status': _0x42fc83[_0x47b74e(0x1a9)],
                    'ack': 0x2
                })
            }), yield (-0x1 * 0x13c + 0x1 * -0xf86 + -0x1ad * -0xa, SetTicketMessagesAsReadZPRO_1[_0x47b74e(0x186)])(_0x56721b);
        }
    });
exports[_0x5ec8ba(0x186)] = Waba360SendMessagesSystem;