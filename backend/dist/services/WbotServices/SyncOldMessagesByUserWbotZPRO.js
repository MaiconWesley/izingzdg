'use strict';
const _0x2641f0 = _0x4ba2;
(function (_0x47f585, _0x14b5ca) {
    const _0x391e6f = _0x4ba2, _0x534b98 = _0x47f585();
    while (!![]) {
        try {
            const _0x179c2d = -parseInt(_0x391e6f(0x118)) / (-0x5 * 0x11c + -0x11 * 0x1f6 + 0x26e3) + -parseInt(_0x391e6f(0xdc)) / (0x1 * 0x2f + -0xcd * 0x17 + 0x123e) + -parseInt(_0x391e6f(0x12a)) / (0x2185 + 0x14 * -0x10 + -0x2042) * (-parseInt(_0x391e6f(0x12e)) / (0x2032 + -0x1295 + 0x1 * -0xd99)) + -parseInt(_0x391e6f(0xd8)) / (-0x58 * -0x4f + 0xed8 + -0x29fb) * (parseInt(_0x391e6f(0xd9)) / (0x180 * -0x13 + -0x1344 + 0x2fca)) + parseInt(_0x391e6f(0x11c)) / (-0x240b + -0x1 * 0x207a + 0x6b * 0xa4) + parseInt(_0x391e6f(0xf7)) / (-0x657 + 0x470 * -0x1 + -0xacf * -0x1) + parseInt(_0x391e6f(0x116)) / (-0xcc4 + 0x67 * -0x29 + 0x1d4c);
            if (_0x179c2d === _0x14b5ca)
                break;
            else
                _0x534b98['push'](_0x534b98['shift']());
        } catch (_0xb69161) {
            _0x534b98['push'](_0x534b98['shift']());
        }
    }
}(_0x5717, 0x30a * -0x410 + 0x77633 + 0x108640));
function _0x4ba2(_0x5c3615, _0x77bdb6) {
    const _0x2483ac = _0x5717();
    return _0x4ba2 = function (_0x1b90c8, _0x2ab64f) {
        _0x1b90c8 = _0x1b90c8 - (-0x1803 + -0x1 * -0x516 + 0x13c0);
        let _0x3a7384 = _0x2483ac[_0x1b90c8];
        return _0x3a7384;
    }, _0x4ba2(_0x5c3615, _0x77bdb6);
}
var __awaiter = this && this[_0x2641f0(0xf3)] || function (_0x5d9865, _0x5552a2, _0xe82430, _0x101c1b) {
        const _0x43a78a = _0x2641f0, _0x43bb2c = {
                'UCpCK': function (_0x269487, _0x1f20d2) {
                    return _0x269487(_0x1f20d2);
                },
                'XpcaL': function (_0x33e9a2, _0x22d16c) {
                    return _0x33e9a2 instanceof _0x22d16c;
                },
                'dKJGm': function (_0x330e3c, _0x331a17) {
                    return _0x330e3c(_0x331a17);
                },
                'hLtFU': function (_0x582030, _0x50e6ef) {
                    return _0x582030(_0x50e6ef);
                },
                'dFSrH': function (_0x243fd1, _0x54e2a8) {
                    return _0x243fd1(_0x54e2a8);
                },
                'ennTj': _0x43a78a(0x12f),
                'oLrmC': function (_0x12d8bd, _0x1d760f) {
                    return _0x12d8bd(_0x1d760f);
                },
                'Aqnzt': function (_0x4cdda2, _0x3e9bd1) {
                    return _0x4cdda2(_0x3e9bd1);
                }
            };
        function _0x21f6a7(_0x416d3b) {
            const _0xa33142 = _0x43a78a;
            return _0x43bb2c[_0xa33142(0x10c)](_0x416d3b, _0xe82430) ? _0x416d3b : new _0xe82430(function (_0x3232d9) {
                const _0xb5a4eb = _0xa33142;
                _0x43bb2c[_0xb5a4eb(0x12d)](_0x3232d9, _0x416d3b);
            });
        }
        return new (_0xe82430 || (_0xe82430 = Promise))(function (_0x1700b4, _0x545150) {
            const _0x356ce8 = _0x43a78a;
            function _0x4ddbb7(_0x3cd9d8) {
                const _0x2297d9 = _0x4ba2;
                try {
                    _0x43bb2c[_0x2297d9(0xee)](_0x37914c, _0x101c1b[_0x2297d9(0xd4)](_0x3cd9d8));
                } catch (_0x19b07c) {
                    _0x43bb2c[_0x2297d9(0xde)](_0x545150, _0x19b07c);
                }
            }
            function _0x28540b(_0x4f858d) {
                const _0x5b83bf = _0x4ba2;
                try {
                    _0x43bb2c[_0x5b83bf(0xec)](_0x37914c, _0x101c1b[_0x43bb2c[_0x5b83bf(0x13f)]](_0x4f858d));
                } catch (_0x21d017) {
                    _0x43bb2c[_0x5b83bf(0xe0)](_0x545150, _0x21d017);
                }
            }
            function _0x37914c(_0x1b6505) {
                const _0x29bc5b = _0x4ba2;
                _0x1b6505[_0x29bc5b(0x121)] ? _0x43bb2c[_0x29bc5b(0xec)](_0x1700b4, _0x1b6505[_0x29bc5b(0x11a)]) : _0x43bb2c[_0x29bc5b(0xe0)](_0x21f6a7, _0x1b6505[_0x29bc5b(0x11a)])[_0x29bc5b(0x111)](_0x4ddbb7, _0x28540b);
            }
            _0x43bb2c[_0x356ce8(0x120)](_0x37914c, (_0x101c1b = _0x101c1b[_0x356ce8(0xfe)](_0x5d9865, _0x5552a2 || []))[_0x356ce8(0xd4)]());
        });
    }, __importDefault = this && this[_0x2641f0(0x127) + _0x2641f0(0x106)] || function (_0x257b73) {
        const _0x18d75c = _0x2641f0;
        return _0x257b73 && _0x257b73[_0x18d75c(0x11e)] ? _0x257b73 : { 'default': _0x257b73 };
    };
function _0x5717() {
    const _0x144322 = [
        'kEWrg',
        'logger',
        'fault',
        'o_Paulo',
        'getChat',
        'ById',
        'getContact',
        'contact',
        'XpcaL',
        'aMessageZP',
        '../TicketS',
        'ers/socket',
        'erty',
        'then',
        'tVKTR',
        './helpers/',
        '../../util',
        'PRO',
        '7924869KuFZty',
        '\x20HH:mm:ss',
        '296286xPDOVM',
        'sage\x20ticke',
        'value',
        'ls/TicketZ',
        '9628066bRQiPd',
        'iceZPRO',
        '__esModule',
        'defineProp',
        'Aqnzt',
        'done',
        'type',
        'default',
        'xtZve',
        'DD-MM-YYYY',
        '../../help',
        '__importDe',
        'syncTime',
        'SLKVI',
        '2049OnITvU',
        'messageId',
        'VerifyMedi',
        'UCpCK',
        '628nGpgnL',
        'throw',
        '\x20already\x20e',
        'fetchMessa',
        'VerifyMess',
        'info',
        'hsnrr',
        'ages',
        'HKyni',
        'update',
        'quotedMsg',
        'where',
        ':\x20Sync\x20mes',
        'hasMedia',
        'America/Sa',
        'moment-tim',
        'ndOrCreate',
        'ennTj',
        'isSync',
        'findOne',
        'EaGun',
        'or:\x20',
        'VerifyCont',
        'TicketServ',
        'ack',
        'unix',
        'ezone',
        'unreadMess',
        'next',
        ':::\x20Z-PRO\x20',
        'reverse',
        ':\x20Sync\x20err',
        '53245wXkMcy',
        '738oBuFgO',
        'ketWbotByI',
        'whatsapp',
        '267768KMfxGV',
        'payload',
        'hLtFU',
        'ges',
        'oLrmC',
        's/loggerZP',
        'WCAqw',
        'ers/GetTic',
        'FvwdD',
        '../../mode',
        ':::\x20ZDG\x20::',
        'kJBJc',
        't:\x20',
        'EmitZPRO',
        'limit',
        'dZPRO',
        'dFSrH',
        'xists',
        'dKJGm',
        'ticket',
        'timestamp',
        'ZPRO',
        'apiConfig',
        '__awaiter',
        'actZPRO',
        'tenantId',
        'kPHNm',
        '1116976MezoOD',
        'ls/Message',
        'xctYy',
        'chat:updat',
        'ervices/Fi',
        'format',
        'unreadCoun',
        'apply',
        'sLvvZ',
        'channel',
        'LqbTp',
        'whatsappId',
        'ageZPRO'
    ];
    _0x5717 = function () {
        return _0x144322;
    };
    return _0x5717();
}
const _0xe0966 = {};
_0xe0966[_0x2641f0(0x11a)] = !![], Object[_0x2641f0(0x11f) + _0x2641f0(0x110)](exports, _0x2641f0(0x11e), _0xe0966);
const loggerZPRO_1 = require(_0x2641f0(0x114) + _0x2641f0(0xe1) + 'RO'), FindOrCreateTicketServiceZPRO_1 = __importDefault(require(_0x2641f0(0x10e) + _0x2641f0(0xfb) + _0x2641f0(0x13e) + _0x2641f0(0x145) + _0x2641f0(0x11d))), VerifyContactZPRO_1 = __importDefault(require(_0x2641f0(0x113) + _0x2641f0(0x144) + _0x2641f0(0xf4))), VerifyMediaMessageZPRO_1 = __importDefault(require(_0x2641f0(0x113) + _0x2641f0(0x12c) + _0x2641f0(0x10d) + 'RO')), VerifyMessageZPRO_1 = __importDefault(require(_0x2641f0(0x113) + _0x2641f0(0x132) + _0x2641f0(0x103))), GetTicketWbotByIdZPRO_1 = __importDefault(require(_0x2641f0(0x126) + _0x2641f0(0xe3) + _0x2641f0(0xda) + _0x2641f0(0xeb))), MessageZPRO_1 = __importDefault(require(_0x2641f0(0xe5) + _0x2641f0(0xf8) + _0x2641f0(0xf1))), TicketZPRO_1 = __importDefault(require(_0x2641f0(0xe5) + _0x2641f0(0x11b) + _0x2641f0(0x115))), socketEmitZPRO_1 = __importDefault(require(_0x2641f0(0x126) + _0x2641f0(0x10f) + _0x2641f0(0xe9))), moment_timezone_1 = __importDefault(require(_0x2641f0(0x13d) + _0x2641f0(0x148))), delay = _0x3f9150 => new Promise(_0x55369e => setTimeout(_0x55369e, _0x3f9150)), SyncOldMessagesByUserWbot = (_0x4ee4b5, _0x2df122, _0x59a93c, _0x1342aa) => __awaiter(void (0x2 * -0x336 + 0x19d5 + -0x1369), void (-0x1 * 0x1e2e + 0x2098 + -0x26a), void (-0x1155 * 0x2 + 0x1 * -0xc19 + -0x1 * -0x2ec3), function* () {
        const _0x23a6bc = _0x2641f0, _0x37e89b = {
                'WCAqw': function (_0x408f8e, _0x15c7ec) {
                    return _0x408f8e + _0x15c7ec;
                },
                'HKyni': _0x23a6bc(0xd5) + _0x23a6bc(0xe6) + _0x23a6bc(0x13a) + _0x23a6bc(0x119) + _0x23a6bc(0xe8),
                'kJBJc': _0x23a6bc(0xdb),
                'xctYy': _0x23a6bc(0x130) + _0x23a6bc(0xed),
                'FvwdD': _0x23a6bc(0x10b),
                'kEWrg': _0x23a6bc(0xef),
                'LqbTp': _0x23a6bc(0xf5),
                'SLKVI': _0x23a6bc(0xf2),
                'EaGun': _0x23a6bc(0x138),
                'xtZve': _0x23a6bc(0x13c) + _0x23a6bc(0x107),
                'tVKTR': _0x23a6bc(0x125) + _0x23a6bc(0x117),
                'sLvvZ': _0x23a6bc(0xfa) + 'e',
                'hsnrr': function (_0x226444, _0x57831a) {
                    return _0x226444(_0x57831a);
                },
                'kPHNm': _0x23a6bc(0xd5) + _0x23a6bc(0xe6) + _0x23a6bc(0xd7) + _0x23a6bc(0x143)
            };
        try {
            const _0x3c498d = yield (-0x1ce8 + -0x40d * -0x1 + 0x65 * 0x3f, GetTicketWbotByIdZPRO_1[_0x23a6bc(0x123)])(_0x4ee4b5), _0x21b878 = yield _0x3c498d[_0x23a6bc(0x10a) + _0x23a6bc(0x109)](_0x1342aa), _0x44088b = yield _0x21b878[_0x23a6bc(0x108)](), _0xf2dc75 = {};
            _0xf2dc75[_0x23a6bc(0xea)] = _0x59a93c;
            let _0xbd2f1f = yield _0x44088b[_0x23a6bc(0x131) + _0x23a6bc(0xdf)](_0xf2dc75);
            loggerZPRO_1[_0x23a6bc(0x105)][_0x23a6bc(0x133)](_0x37e89b[_0x23a6bc(0xe2)](_0x37e89b[_0x23a6bc(0x136)], _0x1342aa)), _0xbd2f1f = _0xbd2f1f[_0x23a6bc(0xd6)]();
            for (const _0x141647 of _0xbd2f1f) {
                const _0x2a40cc = yield _0x44088b[_0x23a6bc(0x10a)](), _0x369345 = yield (0x1 * 0xb40 + 0x6f * 0x2b + -0x1de5, VerifyContactZPRO_1[_0x23a6bc(0x123)])(_0x2a40cc, _0x2df122), _0x164564 = {};
                _0x164564[_0x23a6bc(0x10b)] = _0x369345, _0x164564[_0x23a6bc(0x102)] = _0x4ee4b5, _0x164564[_0x23a6bc(0xd3) + _0x23a6bc(0x135)] = _0x44088b[_0x23a6bc(0xfd) + 't'], _0x164564[_0x23a6bc(0xf5)] = _0x2df122, _0x164564[_0x23a6bc(0x140)] = !![], _0x164564[_0x23a6bc(0x100)] = _0x37e89b[_0x23a6bc(0xe7)];
                const _0xe6c042 = yield (-0x1ec4 + -0x1d24 + -0x11c * -0x36, FindOrCreateTicketServiceZPRO_1[_0x23a6bc(0x123)])(_0x164564), _0xa496bf = {};
                _0xa496bf[_0x23a6bc(0x12b)] = _0x141647['id']['id'], _0xa496bf[_0x23a6bc(0xf5)] = _0x2df122;
                const _0x2eda8e = {};
                _0x2eda8e[_0x23a6bc(0x139)] = _0xa496bf;
                const _0x9fc39 = yield MessageZPRO_1[_0x23a6bc(0x123)][_0x23a6bc(0x141)](_0x2eda8e);
                _0x9fc39 && loggerZPRO_1[_0x23a6bc(0x105)][_0x23a6bc(0x133)](_0x37e89b[_0x23a6bc(0xe2)](_0x141647['id']['id'], _0x37e89b[_0x23a6bc(0xf9)]));
                if (!_0x9fc39) {
                    _0x141647[_0x23a6bc(0x13b)] ? yield (-0x35 * 0x37 + -0x7b * 0x2d + 0x2102, VerifyMediaMessageZPRO_1[_0x23a6bc(0x123)])(_0x141647, _0xe6c042, _0x369345) : yield (0x1e7e + 0xd1 * -0x25 + -0x49 * 0x1, VerifyMessageZPRO_1[_0x23a6bc(0x123)])(_0x141647, _0xe6c042, _0x369345);
                    const _0x1d0169 = {};
                    _0x1d0169[_0x23a6bc(0x12b)] = _0x141647['id']['id'];
                    const _0x5039d9 = yield MessageZPRO_1[_0x23a6bc(0x123)][_0x23a6bc(0x141)]({
                        'where': _0x1d0169,
                        'include': [
                            _0x37e89b[_0x23a6bc(0xe4)],
                            {
                                'model': TicketZPRO_1[_0x23a6bc(0x123)],
                                'as': _0x37e89b[_0x23a6bc(0x104)],
                                'attributes': [
                                    'id',
                                    _0x37e89b[_0x23a6bc(0x101)],
                                    _0x37e89b[_0x23a6bc(0x129)]
                                ]
                            },
                            {
                                'model': MessageZPRO_1[_0x23a6bc(0x123)],
                                'as': _0x37e89b[_0x23a6bc(0x142)],
                                'include': [_0x37e89b[_0x23a6bc(0xe4)]]
                            }
                        ]
                    });
                    if (_0x5039d9) {
                        const _0xfa4e61 = moment_timezone_1[_0x23a6bc(0x123)][_0x23a6bc(0x147)](_0x141647[_0x23a6bc(0xf0)])['tz'](_0x37e89b[_0x23a6bc(0x124)]), _0x1f18d5 = _0xfa4e61[_0x23a6bc(0xfc)](_0x37e89b[_0x23a6bc(0x112)]), _0x2ad51c = {};
                        _0x2ad51c[_0x23a6bc(0x146)] = 0x2, _0x2ad51c[_0x23a6bc(0x128)] = _0x1f18d5, yield _0x5039d9[_0x23a6bc(0x137)](_0x2ad51c);
                        const {ticket: _0x5009c7} = _0x5039d9, _0x30b326 = {};
                        _0x30b326[_0x23a6bc(0xf5)] = _0x5009c7[_0x23a6bc(0xf5)], _0x30b326[_0x23a6bc(0x122)] = _0x37e89b[_0x23a6bc(0xff)], _0x30b326[_0x23a6bc(0xdd)] = _0x5039d9, (0x1 * 0xc10 + 0x2 * 0x374 + -0x4be * 0x4, socketEmitZPRO_1[_0x23a6bc(0x123)])(_0x30b326);
                    }
                    loggerZPRO_1[_0x23a6bc(0x105)][_0x23a6bc(0x133)](_0x37e89b[_0x23a6bc(0xe2)](_0x37e89b[_0x23a6bc(0x136)], _0x141647['id']['id']));
                }
                yield _0x37e89b[_0x23a6bc(0x134)](delay, 0xd * -0x62 + 0x1 * 0x1d47 + 0x8ad * -0x1);
            }
        } catch (_0x17c29b) {
            loggerZPRO_1[_0x23a6bc(0x105)][_0x23a6bc(0x133)](_0x37e89b[_0x23a6bc(0xf6)], _0x17c29b);
        }
    });
exports[_0x2641f0(0x123)] = SyncOldMessagesByUserWbot;