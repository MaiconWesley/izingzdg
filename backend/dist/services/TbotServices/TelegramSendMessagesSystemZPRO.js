'use strict';
const _0x3c9c6e = _0x5ddd;
function _0xff20() {
    const _0x1f53e0 = [
        ')::\x20',
        'telegram',
        'chat:ack',
        'error',
        'sendDocume',
        'swuEX',
        'closed',
        'throw',
        'telegramId',
        'ucxmL',
        'PRO',
        'date',
        'done',
        '\x20|\x20Ticket:',
        ':\x20sendMess',
        '__importDe',
        '1135757kvOJej',
        'hBwWt',
        'findAll',
        'includes',
        'ZPRO',
        '\x20(id:\x20',
        'sended',
        'sJpTx',
        'createdAt',
        '10lCNPMQ',
        'hOCMk',
        'sendVoice',
        'DGaZY',
        'SfBbn',
        'QcbxJ',
        'uKLuN',
        'timestamp',
        'ls/Message',
        'public',
        'update',
        'ers/socket',
        'age\x20is\x20(te',
        'IzLDP',
        'pegBO',
        'ls/TicketZ',
        '../../help',
        'dataValues',
        'tenantId',
        'then',
        'LkmEj',
        'pending',
        'ASC',
        'IyENo',
        'mediaType',
        'next',
        'age\x20media',
        'GPolQ',
        'sendMessag',
        '../../util',
        'nd\x20message',
        'lte',
        ':::\x20ZDG\x20::',
        'ePvLr',
        'EmWmO',
        'buibC',
        '__awaiter',
        'quotedMsg',
        'iKkJf',
        'Mwhsi',
        '../../mode',
        'Error\x20mess',
        ':::\x20Z-PRO\x20',
        'defineProp',
        '4476168hiLKTF',
        'apply',
        'ketMessage',
        'YSZTs',
        'ptt',
        'sAsReadZPR',
        'mediaUrl',
        'pKJLI',
        'Agoik',
        'UTBMj',
        'gFeZG',
        'VMkgg',
        '7901865JwhKPh',
        'age\x20text',
        'source',
        'warn',
        'join',
        'path',
        'default',
        'assign',
        'info',
        'reply_to_m',
        'where',
        'image',
        'fault',
        'sequelize',
        'YHywu',
        'messageId',
        'contact',
        '576024fzvExv',
        's/loggerZP',
        'ers/SetTic',
        'PGuET',
        '11347974QMKTLk',
        'sendPhoto',
        'wyXcY',
        '__esModule',
        'chat',
        'sPwID',
        '3xMivHP',
        'SeYoY',
        'sendVideo',
        '14uxdPlT',
        'audio',
        'EmitZPRO',
        'text',
        'video',
        '12FlfCAA',
        'mediaName',
        '1484110oWFxzr',
        'nant:\x20',
        'value',
        'erty',
        'message_id',
        'body',
        'ticket',
        'logger',
        'ticVh',
        'essage_id',
        'ibyoh',
        '36536vZubpL',
        ':\x20Error\x20se'
    ];
    _0xff20 = function () {
        return _0x1f53e0;
    };
    return _0xff20();
}
(function (_0x5335db, _0x4840a9) {
    const _0x1da70f = _0x5ddd, _0x5ac97c = _0x5335db();
    while (!![]) {
        try {
            const _0x442f41 = -parseInt(_0x1da70f(0x1a7)) / (-0x9dd + -0xac * -0x8 + 0x47e * 0x1) + -parseInt(_0x1da70f(0x218)) / (0x3e2 * -0x4 + 0x2 * -0x829 + 0x1fdc) * (parseInt(_0x1da70f(0x203)) / (-0x1 * 0x243e + -0x1141 + 0x3582)) + parseInt(_0x1da70f(0x1dc)) / (0x117c + 0x22b8 + 0x1a18 * -0x2) + parseInt(_0x1da70f(0x20d)) / (-0x11e + -0x13f1 + 0x1514) * (parseInt(_0x1da70f(0x20b)) / (-0x128b + -0x183c + 0x2acd)) + -parseInt(_0x1da70f(0x206)) / (0x22b5 + -0x15a9 + 0x65 * -0x21) * (parseInt(_0x1da70f(0x1f9)) / (-0xa13 * 0x1 + 0xba6 + -0x18b)) + parseInt(_0x1da70f(0x1e8)) / (-0x5 * -0x6b + 0x1636 + 0x2 * -0xc22) * (-parseInt(_0x1da70f(0x1b0)) / (-0x1 * -0x243e + -0x1 * -0xf3f + -0x3373)) + parseInt(_0x1da70f(0x1fd)) / (0xd7e + 0xa0 * -0x1a + 0x2cd);
            if (_0x442f41 === _0x4840a9)
                break;
            else
                _0x5ac97c['push'](_0x5ac97c['shift']());
        } catch (_0x1bad55) {
            _0x5ac97c['push'](_0x5ac97c['shift']());
        }
    }
}(_0xff20, 0xf735 + 0xc66ee + -0x4b233));
var __awaiter = this && this[_0x3c9c6e(0x1d4)] || function (_0x4df3d1, _0x3b4c27, _0x629217, _0x3ac32c) {
        const _0x4a286a = _0x3c9c6e, _0x89e8f8 = {
                'ticVh': function (_0x8bdc34, _0x492659) {
                    return _0x8bdc34(_0x492659);
                },
                'ibyoh': function (_0x459d52, _0x145bdf) {
                    return _0x459d52 instanceof _0x145bdf;
                },
                'iKkJf': function (_0x15c88c, _0x27e6a9) {
                    return _0x15c88c(_0x27e6a9);
                },
                'EmWmO': _0x4a286a(0x221),
                'GPolQ': function (_0x242fea, _0x4edc54) {
                    return _0x242fea(_0x4edc54);
                },
                'gFeZG': function (_0x4dfad7, _0x46c2fb) {
                    return _0x4dfad7(_0x46c2fb);
                },
                'IzLDP': function (_0x28f7e0, _0x5b2400) {
                    return _0x28f7e0(_0x5b2400);
                }
            };
        function _0x403a7f(_0x38cebd) {
            const _0x4af6a7 = _0x4a286a;
            return _0x89e8f8[_0x4af6a7(0x217)](_0x38cebd, _0x629217) ? _0x38cebd : new _0x629217(function (_0xc1b6bb) {
                const _0x556278 = _0x4af6a7;
                _0x89e8f8[_0x556278(0x215)](_0xc1b6bb, _0x38cebd);
            });
        }
        return new (_0x629217 || (_0x629217 = Promise))(function (_0x1bff4f, _0x753cf7) {
            const _0x1755d7 = _0x4a286a, _0x382037 = {
                    'PGuET': function (_0x23d335, _0x2bc0e9) {
                        const _0x4d94a1 = _0x5ddd;
                        return _0x89e8f8[_0x4d94a1(0x1e6)](_0x23d335, _0x2bc0e9);
                    },
                    'Mwhsi': function (_0x5e97a0, _0x5a9cc9) {
                        const _0xb4d78f = _0x5ddd;
                        return _0x89e8f8[_0xb4d78f(0x1bd)](_0x5e97a0, _0x5a9cc9);
                    }
                };
            function _0x4f5bb1(_0x10b76d) {
                const _0xb9db1d = _0x5ddd;
                try {
                    _0x382037[_0xb9db1d(0x1fc)](_0x244bd3, _0x3ac32c[_0xb9db1d(0x1c9)](_0x10b76d));
                } catch (_0x48a793) {
                    _0x382037[_0xb9db1d(0x1fc)](_0x753cf7, _0x48a793);
                }
            }
            function _0xda7f4b(_0x6da862) {
                const _0x5291ab = _0x5ddd;
                try {
                    _0x89e8f8[_0x5291ab(0x1d6)](_0x244bd3, _0x3ac32c[_0x89e8f8[_0x5291ab(0x1d2)]](_0x6da862));
                } catch (_0x1e5787) {
                    _0x89e8f8[_0x5291ab(0x1cb)](_0x753cf7, _0x1e5787);
                }
            }
            function _0x244bd3(_0x3cf910) {
                const _0x18d2bd = _0x5ddd;
                _0x3cf910[_0x18d2bd(0x226)] ? _0x382037[_0x18d2bd(0x1fc)](_0x1bff4f, _0x3cf910[_0x18d2bd(0x20f)]) : _0x382037[_0x18d2bd(0x1d7)](_0x403a7f, _0x3cf910[_0x18d2bd(0x20f)])[_0x18d2bd(0x1c3)](_0x4f5bb1, _0xda7f4b);
            }
            _0x89e8f8[_0x1755d7(0x1bd)](_0x244bd3, (_0x3ac32c = _0x3ac32c[_0x1755d7(0x1dd)](_0x4df3d1, _0x3b4c27 || []))[_0x1755d7(0x1c9)]());
        });
    }, __importDefault = this && this[_0x3c9c6e(0x229) + _0x3c9c6e(0x1f4)] || function (_0x13d4ac) {
        const _0x2318ed = _0x3c9c6e;
        return _0x13d4ac && _0x13d4ac[_0x2318ed(0x200)] ? _0x13d4ac : { 'default': _0x13d4ac };
    };
const _0x5882a1 = {};
_0x5882a1[_0x3c9c6e(0x20f)] = !![], Object[_0x3c9c6e(0x1db) + _0x3c9c6e(0x210)](exports, _0x3c9c6e(0x200), _0x5882a1);
function _0x5ddd(_0x45ba96, _0x3835e4) {
    const _0xc1a55f = _0xff20();
    return _0x5ddd = function (_0x57108d, _0x1f45f3) {
        _0x57108d = _0x57108d - (-0x386 + -0x1 * -0xe6f + -0x942);
        let _0x506a7c = _0xc1a55f[_0x57108d];
        return _0x506a7c;
    }, _0x5ddd(_0x45ba96, _0x3835e4);
}
const path_1 = require(_0x3c9c6e(0x1ed)), sequelize_1 = require(_0x3c9c6e(0x1f5)), SetTicketMessagesAsReadZPRO_1 = __importDefault(require(_0x3c9c6e(0x1c0) + _0x3c9c6e(0x1fb) + _0x3c9c6e(0x1de) + _0x3c9c6e(0x1e1) + 'O')), socketEmitZPRO_1 = __importDefault(require(_0x3c9c6e(0x1c0) + _0x3c9c6e(0x1bb) + _0x3c9c6e(0x208))), MessageZPRO_1 = __importDefault(require(_0x3c9c6e(0x1d8) + _0x3c9c6e(0x1b8) + _0x3c9c6e(0x1ab))), TicketZPRO_1 = __importDefault(require(_0x3c9c6e(0x1d8) + _0x3c9c6e(0x1bf) + _0x3c9c6e(0x224))), loggerZPRO_1 = require(_0x3c9c6e(0x1cd) + _0x3c9c6e(0x1fa) + 'RO'), SendMessagesSystemWbot = (_0x4b4d64, _0x5f2408) => __awaiter(void (0x1509 + 0x562 + -0x1a6b), void (0xe * -0x8b + -0x116f * 0x1 + 0x1909), void (0x3 * -0xcbc + -0xfc8 + 0x35fc), function* () {
        const _0x1c905a = _0x3c9c6e, _0x3a5f7d = {};
        _0x3a5f7d[_0x1c905a(0x1b3)] = _0x1c905a(0x1c5), _0x3a5f7d[_0x1c905a(0x1a8)] = _0x1c905a(0x1f8), _0x3a5f7d[_0x1c905a(0x1b5)] = _0x1c905a(0x213), _0x3a5f7d[_0x1c905a(0x1f6)] = _0x1c905a(0x220), _0x3a5f7d[_0x1c905a(0x1b1)] = _0x1c905a(0x21b), _0x3a5f7d[_0x1c905a(0x1ff)] = _0x1c905a(0x1d5), _0x3a5f7d[_0x1c905a(0x1df)] = _0x1c905a(0x1af), _0x3a5f7d[_0x1c905a(0x223)] = _0x1c905a(0x1c6), _0x3a5f7d[_0x1c905a(0x1e5)] = _0x1c905a(0x201), _0x3a5f7d[_0x1c905a(0x1e3)] = _0x1c905a(0x209), _0x3a5f7d[_0x1c905a(0x1ae)] = _0x1c905a(0x1b9), _0x3a5f7d[_0x1c905a(0x204)] = function (_0x46ec4d, _0x4b737b) {
            return _0x46ec4d === _0x4b737b;
        }, _0x3a5f7d[_0x1c905a(0x1d1)] = _0x1c905a(0x207), _0x3a5f7d[_0x1c905a(0x1c7)] = function (_0x3524fa, _0xfd07e) {
            return _0x3524fa === _0xfd07e;
        }, _0x3a5f7d[_0x1c905a(0x202)] = _0x1c905a(0x1e0), _0x3a5f7d[_0x1c905a(0x1e7)] = function (_0x290fb9, _0xcf7bf8) {
            return _0x290fb9 === _0xcf7bf8;
        }, _0x3a5f7d[_0x1c905a(0x21f)] = _0x1c905a(0x1f3), _0x3a5f7d[_0x1c905a(0x1e4)] = _0x1c905a(0x20a), _0x3a5f7d[_0x1c905a(0x1d3)] = _0x1c905a(0x1da) + _0x1c905a(0x1d0) + _0x1c905a(0x228) + _0x1c905a(0x1ca), _0x3a5f7d[_0x1c905a(0x1b4)] = _0x1c905a(0x1da) + _0x1c905a(0x1d0) + _0x1c905a(0x228) + _0x1c905a(0x1e9), _0x3a5f7d[_0x1c905a(0x1b6)] = function (_0xe75ca, _0xc835fe) {
            return _0xe75ca * _0xc835fe;
        }, _0x3a5f7d[_0x1c905a(0x1be)] = _0x1c905a(0x1ad), _0x3a5f7d[_0x1c905a(0x1c4)] = _0x1c905a(0x21c);
        const _0x538a10 = _0x3a5f7d, _0x42d5c8 = { [sequelize_1['Op']['is']]: null }, _0x4e67b5 = {
                'fromMe': !![],
                'messageId': _0x42d5c8,
                'status': _0x538a10[_0x1c905a(0x1b3)],
                [sequelize_1['Op']['or']]: [
                    { 'scheduleDate': { [sequelize_1['Op'][_0x1c905a(0x1cf)]]: new Date() } },
                    { 'scheduleDate': { [sequelize_1['Op']['is']]: null } }
                ]
            }, _0x50dce7 = yield MessageZPRO_1[_0x1c905a(0x1ee)][_0x1c905a(0x1a9)]({
                'where': _0x4e67b5,
                'include': [
                    _0x538a10[_0x1c905a(0x1a8)],
                    {
                        'model': TicketZPRO_1[_0x1c905a(0x1ee)],
                        'as': _0x538a10[_0x1c905a(0x1b5)],
                        'where': {
                            'tenantId': _0x5f2408,
                            [sequelize_1['Op']['or']]: {
                                'status': { [sequelize_1['Op']['ne']]: _0x538a10[_0x1c905a(0x1f6)] },
                                'isFarewellMessage': !![]
                            },
                            'channel': _0x538a10[_0x1c905a(0x1b1)],
                            'whatsappId': _0x4b4d64['id']
                        },
                        'include': [_0x538a10[_0x1c905a(0x1a8)]]
                    },
                    {
                        'model': MessageZPRO_1[_0x1c905a(0x1ee)],
                        'as': _0x538a10[_0x1c905a(0x1ff)],
                        'include': [_0x538a10[_0x1c905a(0x1a8)]]
                    }
                ],
                'order': [[
                        _0x538a10[_0x1c905a(0x1df)],
                        _0x538a10[_0x1c905a(0x223)]
                    ]]
            });
        let _0x2cf93a;
        for (const _0x19acff of _0x50dce7) {
            const _0x3d2b80 = _0x19acff, {ticket: _0x9603b4} = _0x3d2b80, _0x3eecc0 = _0x9603b4[_0x1c905a(0x1f8)][_0x1c905a(0x222)], _0x4113f2 = {};
            _0x3d2b80[_0x1c905a(0x1d5)] && (_0x4113f2[_0x1c905a(0x1f1) + _0x1c905a(0x216)] = _0x3d2b80[_0x1c905a(0x1d5)][_0x1c905a(0x1f7)]);
            try {
                if (![
                        _0x538a10[_0x1c905a(0x1e5)],
                        _0x538a10[_0x1c905a(0x1e3)]
                    ][_0x1c905a(0x1aa)](_0x3d2b80[_0x1c905a(0x1c8)]) && _0x3d2b80[_0x1c905a(0x20c)]) {
                    const _0x1ea616 = (-0xc22 + -0x3ca + 0xfec, path_1[_0x1c905a(0x1ec)])(__dirname, '..', '..', '..', _0x538a10[_0x1c905a(0x1ae)]), _0x784f22 = (-0x70f + -0x1335 + 0x1a44, path_1[_0x1c905a(0x1ec)])(_0x1ea616, _0x3d2b80[_0x1c905a(0x20c)]);
                    if (_0x538a10[_0x1c905a(0x204)](_0x3d2b80[_0x1c905a(0x1c8)], _0x538a10[_0x1c905a(0x1d1)]) || _0x538a10[_0x1c905a(0x1c7)](_0x3d2b80[_0x1c905a(0x1c8)], _0x538a10[_0x1c905a(0x202)])) {
                        const _0x2f8d65 = {};
                        _0x2f8d65[_0x1c905a(0x1ea)] = _0x784f22, _0x2cf93a = yield _0x4b4d64[_0x1c905a(0x21b)][_0x1c905a(0x1b2)](_0x3eecc0, _0x2f8d65, _0x4113f2);
                    } else {
                        if (_0x538a10[_0x1c905a(0x1e7)](_0x3d2b80[_0x1c905a(0x1c8)], _0x538a10[_0x1c905a(0x21f)])) {
                            const _0x5b8352 = {};
                            _0x5b8352[_0x1c905a(0x1ea)] = _0x784f22, _0x2cf93a = yield _0x4b4d64[_0x1c905a(0x21b)][_0x1c905a(0x1fe)](_0x3eecc0, _0x5b8352, _0x4113f2);
                        } else {
                            if (_0x538a10[_0x1c905a(0x1c7)](_0x3d2b80[_0x1c905a(0x1c8)], _0x538a10[_0x1c905a(0x1e4)])) {
                                const _0x544f60 = {};
                                _0x544f60[_0x1c905a(0x1ea)] = _0x784f22, _0x2cf93a = yield _0x4b4d64[_0x1c905a(0x21b)][_0x1c905a(0x205)](_0x3eecc0, _0x544f60, _0x4113f2);
                            } else {
                                const _0x1751a4 = {};
                                _0x1751a4[_0x1c905a(0x1ea)] = _0x784f22, _0x2cf93a = yield _0x4b4d64[_0x1c905a(0x21b)][_0x1c905a(0x21e) + 'nt'](_0x3eecc0, _0x1751a4, _0x4113f2);
                            }
                        }
                    }
                    loggerZPRO_1[_0x1c905a(0x214)][_0x1c905a(0x1f0)](_0x538a10[_0x1c905a(0x1d3)]);
                } else
                    _0x2cf93a = yield _0x4b4d64[_0x1c905a(0x21b)][_0x1c905a(0x1cc) + 'e'](_0x3eecc0, _0x3d2b80[_0x1c905a(0x212)], _0x4113f2), loggerZPRO_1[_0x1c905a(0x214)][_0x1c905a(0x1f0)](_0x538a10[_0x1c905a(0x1b4)]);
                const _0x165f5d = Object[_0x1c905a(0x1ef)](Object[_0x1c905a(0x1ef)](Object[_0x1c905a(0x1ef)]({}, _0x3d2b80), _0x2cf93a), {
                        'id': _0x3d2b80['id'],
                        'timestamp': _0x538a10[_0x1c905a(0x1b6)](_0x2cf93a[_0x1c905a(0x225)], 0x455 * 0x2 + -0x1ad * -0x11 + -0x213f),
                        'messageId': _0x2cf93a[_0x1c905a(0x211)],
                        'status': _0x538a10[_0x1c905a(0x1be)],
                        'ack': 0x2
                    }), _0x582d61 = {};
                _0x582d61['id'] = _0x3d2b80['id'];
                const _0x299295 = {};
                _0x299295[_0x1c905a(0x1f2)] = _0x582d61, yield MessageZPRO_1[_0x1c905a(0x1ee)][_0x1c905a(0x1ba)](Object[_0x1c905a(0x1ef)]({}, _0x165f5d), _0x299295), (0x2 * -0x1139 + -0x246b + 0x46dd, socketEmitZPRO_1[_0x1c905a(0x1ee)])({
                    'tenantId': _0x9603b4[_0x1c905a(0x1c2)],
                    'type': _0x538a10[_0x1c905a(0x1c4)],
                    'payload': Object[_0x1c905a(0x1ef)](Object[_0x1c905a(0x1ef)]({}, _0x3d2b80[_0x1c905a(0x1c1)]), {
                        'id': _0x3d2b80['id'],
                        'mediaUrl': _0x3d2b80[_0x1c905a(0x1e2)],
                        'timestamp': _0x165f5d[_0x1c905a(0x1b7)],
                        'messageId': _0x2cf93a[_0x1c905a(0x211)],
                        'status': _0x538a10[_0x1c905a(0x1be)],
                        'ack': 0x2
                    })
                }), yield (-0x3 * 0x63a + -0x21ba * 0x1 + 0x3468, SetTicketMessagesAsReadZPRO_1[_0x1c905a(0x1ee)])(_0x9603b4);
            } catch (_0x1b25a4) {
                const _0x48da96 = _0x3d2b80['id'], _0xda62fb = _0x3d2b80[_0x1c905a(0x213)]['id'];
                loggerZPRO_1[_0x1c905a(0x214)][_0x1c905a(0x21d)](_0x1c905a(0x1d9) + _0x1c905a(0x1bc) + _0x1c905a(0x20e) + _0x5f2408 + (_0x1c905a(0x227) + '\x20') + _0xda62fb + ')'), loggerZPRO_1[_0x1c905a(0x214)][_0x1c905a(0x1eb)](_0x1c905a(0x1da) + _0x1c905a(0x1d0) + _0x1c905a(0x219) + _0x1c905a(0x1ce) + _0x1c905a(0x1ac) + _0x48da96 + _0x1c905a(0x21a) + _0x1b25a4);
            }
        }
    });
exports[_0x3c9c6e(0x1ee)] = SendMessagesSystemWbot;