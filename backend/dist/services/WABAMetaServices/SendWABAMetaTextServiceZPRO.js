'use strict';
const _0x925646 = _0x41d1;
(function (_0x567a52, _0x1252a9) {
    const _0x5ce4d7 = _0x41d1, _0x4c9548 = _0x567a52();
    while (!![]) {
        try {
            const _0x611ee0 = parseInt(_0x5ce4d7(0x108)) / (-0x1 * 0x1976 + 0x92e + 0x1049) * (parseInt(_0x5ce4d7(0xf7)) / (-0x233d + 0x2613 + 0x16a * -0x2)) + -parseInt(_0x5ce4d7(0xc7)) / (0x1f * -0xaf + 0xe55 * 0x2 + -0x776) * (-parseInt(_0x5ce4d7(0xee)) / (-0x20b * -0xb + -0xd0d * 0x2 + -0x3a5 * -0x1)) + -parseInt(_0x5ce4d7(0x118)) / (0xd2a * -0x2 + -0x25d6 + 0x1565 * 0x3) + parseInt(_0x5ce4d7(0xe3)) / (0x883 * 0x3 + -0x8c4 + -0x3 * 0x595) * (parseInt(_0x5ce4d7(0xd8)) / (-0x1 * -0xbc1 + 0x4 * -0xa0 + -0x93a)) + -parseInt(_0x5ce4d7(0xef)) / (-0x64d * 0x3 + -0x8e3 * 0x1 + 0x1bd2) * (parseInt(_0x5ce4d7(0xe9)) / (0x2066 * -0x1 + -0x1 * 0x761 + 0x27d0)) + -parseInt(_0x5ce4d7(0x11a)) / (0x51f + 0x578 + -0xa8d) + -parseInt(_0x5ce4d7(0xf9)) / (-0x203e + 0x3 * -0x669 + 0x3384) * (-parseInt(_0x5ce4d7(0xd5)) / (0xad8 + -0x6f * 0x22 + 0x3f2));
            if (_0x611ee0 === _0x1252a9)
                break;
            else
                _0x4c9548['push'](_0x4c9548['shift']());
        } catch (_0x2357b5) {
            _0x4c9548['push'](_0x4c9548['shift']());
        }
    }
}(_0x3438, -0x1257f2 + 0x12dc14 + -0x1d9f * -0x4f));
function _0x3438() {
    const _0xd40d2f = [
        '../../help',
        'chat:ack',
        '5870705qIbkpv',
        'erty',
        '10875310JUtbjS',
        ':\x20WABA\x20sen',
        'payload',
        'PP_OFFLINE',
        'done',
        'now',
        'apply',
        'tenantId',
        'SJeoR',
        'warn',
        'ack',
        'messaging_',
        'dtSki',
        'xoiwO',
        'fjFic',
        'bmToken',
        'ls/TicketZ',
        '/messages?',
        'contact',
        '../../erro',
        'method',
        'wVbVC',
        '../../util',
        'ls/Message',
        'text',
        's/loggerZP',
        'sendMessag',
        'update',
        'wabaVersio',
        'cltsn',
        '3jUmsln',
        'ers/socket',
        'sended',
        'DFOiT',
        'fault',
        '__esModule',
        'type',
        'geXhf',
        'kwAkO',
        'PRO',
        'findOne',
        'data',
        'access_tok',
        'https://gr',
        '319992mjGBNc',
        'XmLqC',
        'then',
        '7UUHSPs',
        '../../mode',
        'logger',
        'POST',
        'aph.facebo',
        'body',
        'd\x20text\x20err',
        'CasKB',
        'ok.com/v',
        'defineProp',
        'hESbF',
        '4726284BwJVlK',
        'product',
        'scCRy',
        'pwayP',
        'ate',
        'url',
        '954EBikQe',
        'ZPRO',
        'messageId',
        'n/json',
        'status',
        '4776956kdWJKR',
        '52928kTprhE',
        'zSMaP',
        'rZPRO',
        'value',
        'MmuOU',
        'Content-Ty',
        'EmitZPRO',
        '__importDe',
        '346900GrYJVJ',
        'headers',
        '308NtMFRj',
        'viyAe',
        'next',
        'EyPPA',
        'SQKzX',
        'axios',
        'ERR_WHATSA',
        '__awaiter',
        ':::\x20ZDG\x20::',
        'NjhdT',
        'applicatio',
        'where',
        'en=',
        'WtdZm',
        'idFront',
        '5ZrkYQz',
        'throw',
        'messages',
        'CONNECTED',
        ':::\x20Z-PRO\x20',
        'fromMe',
        'rs/AppErro',
        'pyQNA',
        'whatsapp',
        'UQNyy',
        'getTime',
        'ticket:upd',
        'default',
        'pHYXX'
    ];
    _0x3438 = function () {
        return _0xd40d2f;
    };
    return _0x3438();
}
var __awaiter = this && this[_0x925646(0x100)] || function (_0xec8960, _0x47e968, _0x539567, _0x42913f) {
        const _0x3ead0b = _0x925646, _0x252ad5 = {
                'WtdZm': function (_0x4a6797, _0x401cc0) {
                    return _0x4a6797(_0x401cc0);
                },
                'NjhdT': function (_0x16bc8f, _0x68d383) {
                    return _0x16bc8f instanceof _0x68d383;
                },
                'wVbVC': _0x3ead0b(0x109),
                'XmLqC': function (_0x4954e2, _0x2caa8b) {
                    return _0x4954e2(_0x2caa8b);
                },
                'zSMaP': function (_0x16a77b, _0x3a1be9) {
                    return _0x16a77b(_0x3a1be9);
                }
            };
        function _0x183f41(_0x46cbe2) {
            const _0x183f8a = _0x3ead0b, _0x4971c6 = {
                    'DFOiT': function (_0x3f6d67, _0x3603aa) {
                        const _0x8dab53 = _0x41d1;
                        return _0x252ad5[_0x8dab53(0x106)](_0x3f6d67, _0x3603aa);
                    }
                };
            return _0x252ad5[_0x183f8a(0x102)](_0x46cbe2, _0x539567) ? _0x46cbe2 : new _0x539567(function (_0x5a3e4f) {
                const _0x54c9c8 = _0x183f8a;
                _0x4971c6[_0x54c9c8(0xca)](_0x5a3e4f, _0x46cbe2);
            });
        }
        return new (_0x539567 || (_0x539567 = Promise))(function (_0x4166de, _0x4e5b74) {
            const _0x2d634e = _0x3ead0b, _0x297b77 = {
                    'UQNyy': function (_0x41f83d, _0x1b0ad8) {
                        const _0x2c43c6 = _0x41d1;
                        return _0x252ad5[_0x2c43c6(0x106)](_0x41f83d, _0x1b0ad8);
                    },
                    'SJeoR': function (_0x381792, _0x10cd40) {
                        const _0x46d07f = _0x41d1;
                        return _0x252ad5[_0x46d07f(0xf0)](_0x381792, _0x10cd40);
                    },
                    'pwayP': function (_0x45b535, _0x4298b7) {
                        const _0x3e9066 = _0x41d1;
                        return _0x252ad5[_0x3e9066(0xf0)](_0x45b535, _0x4298b7);
                    }
                };
            function _0x3989e8(_0x4d5bbc) {
                const _0xf60b83 = _0x41d1;
                try {
                    _0x297b77[_0xf60b83(0x111)](_0x4e75ff, _0x42913f[_0xf60b83(0xfb)](_0x4d5bbc));
                } catch (_0x1ccb0e) {
                    _0x297b77[_0xf60b83(0x122)](_0x4e5b74, _0x1ccb0e);
                }
            }
            function _0x171751(_0x120593) {
                const _0xc2f88e = _0x41d1;
                try {
                    _0x252ad5[_0xc2f88e(0x106)](_0x4e75ff, _0x42913f[_0x252ad5[_0xc2f88e(0xbe)]](_0x120593));
                } catch (_0x3ed274) {
                    _0x252ad5[_0xc2f88e(0xd6)](_0x4e5b74, _0x3ed274);
                }
            }
            function _0x4e75ff(_0xb9ee72) {
                const _0x633820 = _0x41d1;
                _0xb9ee72[_0x633820(0x11e)] ? _0x297b77[_0x633820(0x111)](_0x4166de, _0xb9ee72[_0x633820(0xf2)]) : _0x297b77[_0x633820(0xe6)](_0x183f41, _0xb9ee72[_0x633820(0xf2)])[_0x633820(0xd7)](_0x3989e8, _0x171751);
            }
            _0x252ad5[_0x2d634e(0x106)](_0x4e75ff, (_0x42913f = _0x42913f[_0x2d634e(0x120)](_0xec8960, _0x47e968 || []))[_0x2d634e(0xfb)]());
        });
    }, __importDefault = this && this[_0x925646(0xf6) + _0x925646(0xcb)] || function (_0x39c191) {
        const _0x292814 = _0x925646;
        return _0x39c191 && _0x39c191[_0x292814(0xcc)] ? _0x39c191 : { 'default': _0x39c191 };
    };
const _0x41ae27 = {};
_0x41ae27[_0x925646(0xf2)] = !![], Object[_0x925646(0xe1) + _0x925646(0x119)](exports, _0x925646(0xcc), _0x41ae27);
const axios_1 = __importDefault(require(_0x925646(0xfe))), TicketZPRO_1 = __importDefault(require(_0x925646(0xd9) + _0x925646(0x12a) + _0x925646(0xd0))), MessageZPRO_1 = __importDefault(require(_0x925646(0xd9) + _0x925646(0xc0) + _0x925646(0xea))), socketEmitZPRO_1 = __importDefault(require(_0x925646(0x116) + _0x925646(0xc8) + _0x925646(0xf5))), AppErrorZPRO_1 = __importDefault(require(_0x925646(0xbc) + _0x925646(0x10e) + _0x925646(0xf1))), loggerZPRO_1 = require(_0x925646(0xbf) + _0x925646(0xc2) + 'RO');
function _0x41d1(_0x4b3024, _0x2adc73) {
    const _0x2b2f25 = _0x3438();
    return _0x41d1 = function (_0x2ad889, _0x1d22e2) {
        _0x2ad889 = _0x2ad889 - (0x10 * -0x14e + 0x859 + 0xd41);
        let _0x123a27 = _0x2b2f25[_0x2ad889];
        return _0x123a27;
    }, _0x41d1(_0x4b3024, _0x2adc73);
}
class SendMessage {
    [_0x925646(0xc3) + 'e']({
        from: _0x4f7751,
        phone_number_id: _0x1d6dd7,
        message: _0xb0db35,
        ticket: _0xc2a131,
        tenantId: _0x4d236b,
        idFront: _0x3789af,
        whatsapp: _0x50daf3
    }) {
        const _0x422144 = _0x925646, _0x3b5fba = {
                'fjFic': function (_0x269594, _0x57f53a) {
                    return _0x269594 !== _0x57f53a;
                },
                'viyAe': _0x422144(0x10b),
                'dtSki': _0x422144(0xff) + _0x422144(0x11d),
                'SQKzX': function (_0x3397ee, _0x107653) {
                    return _0x3397ee === _0x107653;
                },
                'scCRy': function (_0x47f321, _0x3cf6ad) {
                    return _0x47f321 === _0x3cf6ad;
                },
                'pHYXX': _0x422144(0xdb),
                'pyQNA': _0x422144(0x110),
                'kwAkO': _0x422144(0x103) + _0x422144(0xec),
                'cltsn': function (_0x2789dc, _0x3866f4) {
                    return _0x2789dc || _0x3866f4;
                },
                'MmuOU': _0x422144(0xc1),
                'hESbF': _0x422144(0xc9),
                'xoiwO': _0x422144(0x113) + _0x422144(0xe7),
                'EyPPA': _0x422144(0x117),
                'geXhf': _0x422144(0x10c) + _0x422144(0x101) + _0x422144(0x11b) + _0x422144(0xde) + 'or',
                'CasKB': function (_0x4935f7, _0x5caabb, _0x57ecf0, _0x19db3c, _0xea0ee8) {
                    return _0x4935f7(_0x5caabb, _0x57ecf0, _0x19db3c, _0xea0ee8);
                }
            };
        return _0x3b5fba[_0x422144(0xdf)](__awaiter, this, void (0x1b * -0x8 + 0x653 + -0x57b), void (-0x1d * -0xfd + -0x2230 + 0x1 * 0x587), function* () {
            const _0x3f9a7a = _0x422144;
            if (_0x3b5fba[_0x3f9a7a(0x128)](_0x50daf3[_0x3f9a7a(0xed)], _0x3b5fba[_0x3f9a7a(0xfa)]))
                throw new AppErrorZPRO_1[(_0x3f9a7a(0x114))](_0x3b5fba[_0x3f9a7a(0x126)], -0x7e * 0x2b + -0x136a + -0xe0c * -0x3);
            try {
                const _0x38911d = _0x3f9a7a(0xd4) + _0x3f9a7a(0xdc) + _0x3f9a7a(0xe0) + (_0x3b5fba[_0x3f9a7a(0xfd)](_0x50daf3, null) || _0x3b5fba[_0x3f9a7a(0xfd)](_0x50daf3, void (-0x1 * 0x26e1 + -0xbf2 * -0x1 + 0x1aef)) ? void (-0x142 * -0xe + 0x2e3 * 0x7 + -0x25d1) : _0x50daf3[_0x3f9a7a(0xc5) + 'n']) + '/' + _0x1d6dd7 + (_0x3f9a7a(0xba) + _0x3f9a7a(0xd3) + _0x3f9a7a(0x105)) + (_0x3b5fba[_0x3f9a7a(0xe5)](_0x50daf3, null) || _0x3b5fba[_0x3f9a7a(0xfd)](_0x50daf3, void (-0x2 * -0x74b + 0xa38 + -0x18ce)) ? void (-0xda3 * -0x1 + 0xac7 + 0x4e2 * -0x5) : _0x50daf3[_0x3f9a7a(0x129)]), _0x48869f = {};
                _0x48869f[_0x3f9a7a(0xdd)] = _0xb0db35;
                const _0x162b9c = {};
                _0x162b9c[_0x3f9a7a(0xbd)] = _0x3b5fba[_0x3f9a7a(0x115)], _0x162b9c[_0x3f9a7a(0xe8)] = _0x38911d, _0x162b9c[_0x3f9a7a(0xd2)] = {}, _0x162b9c[_0x3f9a7a(0xf8)] = {}, _0x162b9c[_0x3f9a7a(0xd2)][_0x3f9a7a(0x125) + _0x3f9a7a(0xe4)] = _0x3b5fba[_0x3f9a7a(0x10f)], _0x162b9c[_0x3f9a7a(0xd2)]['to'] = _0x4f7751, _0x162b9c[_0x3f9a7a(0xd2)][_0x3f9a7a(0xc1)] = _0x48869f, _0x162b9c[_0x3f9a7a(0xf8)][_0x3f9a7a(0xf4) + 'pe'] = _0x3b5fba[_0x3f9a7a(0xcf)];
                const _0x4a94d4 = yield (0x13a5 + 0x2166 + -0x16f * 0x25, axios_1[_0x3f9a7a(0x114)])(_0x162b9c);
                let _0xda0145 = Date[_0x3f9a7a(0x11f)]();
                const _0x533039 = {
                        'messageId': _0x4a94d4[_0x3f9a7a(0xd2)][_0x3f9a7a(0x10a)][-0xb09 + -0x225f + -0x1 * -0x2d68]['id'] || '',
                        'ticketId': _0xc2a131['id'],
                        'contactId': _0xc2a131[_0x3f9a7a(0xbb)]['id'],
                        'body': _0x3b5fba[_0x3f9a7a(0xc6)](_0xb0db35, ''),
                        'fromMe': !![],
                        'mediaType': _0x3b5fba[_0x3f9a7a(0xf3)],
                        'read': !![],
                        'ack': 0x2,
                        'timestamp': _0xda0145,
                        'status': _0x3b5fba[_0x3f9a7a(0xe2)]
                    }, _0x5894b1 = {};
                _0x5894b1['id'] = _0xc2a131['id'];
                const _0x370499 = {};
                _0x370499[_0x3f9a7a(0x104)] = _0x5894b1;
                const _0xeda8f4 = yield TicketZPRO_1[_0x3f9a7a(0x114)][_0x3f9a7a(0xd1)](_0x370499);
                if (!_0xeda8f4)
                    return;
                yield _0xeda8f4[_0x3f9a7a(0xc4)]({
                    'lastMessage': _0x533039[_0x3f9a7a(0xdd)],
                    'lastMessageAt': new Date()[_0x3f9a7a(0x112)](),
                    'answered': _0x4a94d4[_0x3f9a7a(0xd2)][_0x3f9a7a(0x10d)] || ![]
                });
                const _0x2e3e61 = {};
                _0x2e3e61[_0x3f9a7a(0x107)] = _0x3789af, _0x2e3e61[_0x3f9a7a(0x121)] = _0x4d236b;
                const _0x19fe1b = {};
                _0x19fe1b[_0x3f9a7a(0x104)] = _0x2e3e61;
                const _0x18faa3 = yield MessageZPRO_1[_0x3f9a7a(0x114)][_0x3f9a7a(0xd1)](_0x19fe1b);
                if (!_0x18faa3)
                    return;
                const _0x1d6d82 = {};
                _0x1d6d82[_0x3f9a7a(0xeb)] = _0x4a94d4[_0x3f9a7a(0xd2)][_0x3f9a7a(0x10a)][-0x1bb3 + -0x5 * 0x6f3 + 0x3e72]['id'], _0x1d6d82[_0x3f9a7a(0x124)] = 0x2, _0x1d6d82[_0x3f9a7a(0xed)] = _0x3b5fba[_0x3f9a7a(0xe2)], yield _0x18faa3[_0x3f9a7a(0xc4)](_0x1d6d82);
                const _0x26dbfe = {};
                _0x26dbfe[_0x3f9a7a(0x121)] = _0x4d236b, _0x26dbfe[_0x3f9a7a(0xcd)] = _0x3b5fba[_0x3f9a7a(0x127)], _0x26dbfe[_0x3f9a7a(0x11c)] = _0xc2a131, (-0x2578 + 0x13 * -0xf1 + -0x375b * -0x1, socketEmitZPRO_1[_0x3f9a7a(0x114)])(_0x26dbfe);
                const _0x5d1ffc = {};
                _0x5d1ffc[_0x3f9a7a(0xeb)] = _0x4a94d4[_0x3f9a7a(0xd2)][_0x3f9a7a(0x10a)][0x265a + -0x492 + 0x2 * -0x10e4]['id'], _0x5d1ffc[_0x3f9a7a(0x121)] = _0x4d236b;
                const _0x2a3131 = {};
                _0x2a3131[_0x3f9a7a(0x104)] = _0x5d1ffc;
                const _0x41b939 = yield MessageZPRO_1[_0x3f9a7a(0x114)][_0x3f9a7a(0xd1)](_0x2a3131);
                if (!_0x41b939)
                    return;
                const _0xf2a8ff = {};
                return _0xf2a8ff[_0x3f9a7a(0x121)] = _0x4d236b, _0xf2a8ff[_0x3f9a7a(0xcd)] = _0x3b5fba[_0x3f9a7a(0xfc)], _0xf2a8ff[_0x3f9a7a(0x11c)] = _0x41b939, (-0x21ff + -0x1bcc + -0x3dcb * -0x1, socketEmitZPRO_1[_0x3f9a7a(0x114)])(_0xf2a8ff), _0x4a94d4[_0x3f9a7a(0xd2)];
            } catch (_0x51e115) {
                loggerZPRO_1[_0x3f9a7a(0xda)][_0x3f9a7a(0x123)](_0x3b5fba[_0x3f9a7a(0xce)]);
                throw _0x51e115;
            }
        });
    }
}
exports[_0x925646(0x114)] = SendMessage;