'use strict';
const _0x236b96 = _0x52cb;
(function (_0x1e3d29, _0x4a8bdb) {
    const _0x28d942 = _0x52cb, _0x1b4630 = _0x1e3d29();
    while (!![]) {
        try {
            const _0x28fb28 = parseInt(_0x28d942(0x139)) / (0x154 * 0x10 + 0x77d + 0x265 * -0xc) * (parseInt(_0x28d942(0x15e)) / (0x1592 + -0x15a9 + 0x19)) + parseInt(_0x28d942(0x154)) / (-0x1b46 + -0x1f2c + 0x29 * 0x16d) + -parseInt(_0x28d942(0x17f)) / (-0x57 * 0x7 + 0x15 * -0xb5 + 0x89f * 0x2) + parseInt(_0x28d942(0x194)) / (-0x1 * 0x10c6 + 0x1a88 + 0x115 * -0x9) + parseInt(_0x28d942(0x131)) / (0x14c9 + -0x19f4 + -0x3 * -0x1bb) + -parseInt(_0x28d942(0x148)) / (-0x2 * -0xd83 + -0xb4f + 0x1 * -0xfb0) * (-parseInt(_0x28d942(0x138)) / (-0x1228 + -0x9 * 0x1 + 0x1239)) + parseInt(_0x28d942(0x15f)) / (-0x1cbe + -0x177a + 0x3441) * (-parseInt(_0x28d942(0x18b)) / (-0x1a55 + 0x14 * 0x16d + -0x3d * 0x9));
            if (_0x28fb28 === _0x4a8bdb)
                break;
            else
                _0x1b4630['push'](_0x1b4630['shift']());
        } catch (_0x1ddb41) {
            _0x1b4630['push'](_0x1b4630['shift']());
        }
    }
}(_0x15b9, 0xf31 * 0x7f + 0x61905 * 0x1 + 0x3 * -0x19ae4));
function _0x52cb(_0x6b7fb9, _0x33f5b3) {
    const _0x5888fd = _0x15b9();
    return _0x52cb = function (_0x362140, _0x1dd26b) {
        _0x362140 = _0x362140 - (-0x249e + -0x1 * 0xcb5 + 0x2 * 0x193e);
        let _0x17a444 = _0x5888fd[_0x362140];
        return _0x17a444;
    }, _0x52cb(_0x6b7fb9, _0x33f5b3);
}
function _0x15b9() {
    const _0x135f11 = [
        'default',
        '1319428DpGDtY',
        'name',
        'headers',
        'access_tok',
        'ETGOO',
        'pAagL',
        'bmToken',
        'lBroc',
        'n/json',
        'method',
        'teMessage',
        'findOne',
        '8659580QOEqAk',
        'FQNTY',
        '../../erro',
        'oUCUE',
        'CONNECTED',
        'templates',
        'whatsapp',
        'eLcNk',
        ':\x20WABA\x20sen',
        '2858610XpxecB',
        'eKLYP',
        'status',
        '../../help',
        'tenantId',
        'sended',
        'language',
        'aph.facebo',
        'POST',
        '/messages?',
        '../../mode',
        'apply',
        'ack',
        'https://gr',
        'contact',
        'applicatio',
        'd\x20template',
        'ticket:upd',
        'done',
        'now',
        'template',
        '3488208JwyUGC',
        'WeftC',
        'getTime',
        'messaging_',
        'erty',
        'ls/TicketZ',
        'en=',
        '2324808MFlyHf',
        '720181ELkXyk',
        'idFront',
        'teiQb',
        'qsMrI',
        'AVgMI',
        'fromMe',
        'rZPRO',
        'mediaType',
        'then',
        'rTdqY',
        ':::\x20ZDG\x20::',
        'fault',
        'where',
        'Vicgt',
        's/loggerZP',
        '7LZnNJl',
        'PRO',
        'Aidfc',
        'ers/socket',
        'chat:ack',
        'VNLGU',
        'UuMYD',
        'type',
        'code',
        'next',
        'throw',
        'NOWFJ',
        '1427583kLfFce',
        'ate',
        'ZPRO',
        'DvPVh',
        '__esModule',
        'messageId',
        'rs/AppErro',
        '\x20error',
        'uGXId',
        '../../util',
        '2xqIxWN',
        '18XVJCbR',
        'vzskd',
        '__importDe',
        'QuAPS',
        'mWaLN',
        'url',
        'EmitZPRO',
        '__awaiter',
        'data',
        'product',
        'logger',
        'messages',
        'LMbkG',
        'ULzSg',
        'zojAu',
        'payload',
        'axios',
        'warn',
        'PP_OFFLINE',
        'update',
        'IWPRu',
        'sendTempla',
        'Content-Ty',
        'defineProp',
        'body',
        'ERR_WHATSA',
        'value',
        'ls/Message',
        'ok.com/v',
        ':::\x20Z-PRO\x20',
        'wabaVersio'
    ];
    _0x15b9 = function () {
        return _0x135f11;
    };
    return _0x15b9();
}
var __awaiter = this && this[_0x236b96(0x166)] || function (_0xa0623a, _0x385177, _0xd4c7d1, _0x691fa4) {
        const _0x5054d4 = _0x236b96, _0x4295a0 = {
                'FQNTY': function (_0x1b4ef6, _0xe5ee5b) {
                    return _0x1b4ef6(_0xe5ee5b);
                },
                'DvPVh': function (_0x248b97, _0x1cde7a) {
                    return _0x248b97 instanceof _0x1cde7a;
                },
                'AVgMI': function (_0x5956c0, _0xbcd931) {
                    return _0x5956c0(_0xbcd931);
                },
                'mWaLN': _0x5054d4(0x152),
                'eKLYP': function (_0x151260, _0x3f6f7c) {
                    return _0x151260(_0x3f6f7c);
                },
                'uGXId': function (_0x2a67f4, _0x24e2c3) {
                    return _0x2a67f4(_0x24e2c3);
                },
                'teiQb': function (_0x2c8394, _0x10f03f) {
                    return _0x2c8394(_0x10f03f);
                },
                'eLcNk': function (_0x3a41ea, _0x3b9d6c) {
                    return _0x3a41ea(_0x3b9d6c);
                }
            };
        function _0x39eea5(_0xd81f9) {
            const _0x18c267 = _0x5054d4, _0x203973 = {
                    'rTdqY': function (_0x1dac99, _0x18dae9) {
                        const _0x4721a0 = _0x52cb;
                        return _0x4295a0[_0x4721a0(0x18c)](_0x1dac99, _0x18dae9);
                    }
                };
            return _0x4295a0[_0x18c267(0x157)](_0xd81f9, _0xd4c7d1) ? _0xd81f9 : new _0xd4c7d1(function (_0x1d88b7) {
                const _0x572452 = _0x18c267;
                _0x203973[_0x572452(0x142)](_0x1d88b7, _0xd81f9);
            });
        }
        return new (_0xd4c7d1 || (_0xd4c7d1 = Promise))(function (_0x222b58, _0x4931bd) {
            const _0x3e8045 = _0x5054d4, _0x4365b0 = {
                    'lBroc': function (_0x2a5f3d, _0x794f2d) {
                        const _0x2a7961 = _0x52cb;
                        return _0x4295a0[_0x2a7961(0x13b)](_0x2a5f3d, _0x794f2d);
                    }
                };
            function _0x1c5aa2(_0x168d17) {
                const _0x11c391 = _0x52cb;
                try {
                    _0x4365b0[_0x11c391(0x186)](_0x82cc79, _0x691fa4[_0x11c391(0x151)](_0x168d17));
                } catch (_0xd4644b) {
                    _0x4365b0[_0x11c391(0x186)](_0x4931bd, _0xd4644b);
                }
            }
            function _0x445b3b(_0x195110) {
                const _0x1c9189 = _0x52cb;
                try {
                    _0x4295a0[_0x1c9189(0x13d)](_0x82cc79, _0x691fa4[_0x4295a0[_0x1c9189(0x163)]](_0x195110));
                } catch (_0x29bf59) {
                    _0x4295a0[_0x1c9189(0x195)](_0x4931bd, _0x29bf59);
                }
            }
            function _0x82cc79(_0x59e44b) {
                const _0xb75cd8 = _0x52cb;
                _0x59e44b[_0xb75cd8(0x12e)] ? _0x4295a0[_0xb75cd8(0x195)](_0x222b58, _0x59e44b[_0xb75cd8(0x179)]) : _0x4295a0[_0xb75cd8(0x15c)](_0x39eea5, _0x59e44b[_0xb75cd8(0x179)])[_0xb75cd8(0x141)](_0x1c5aa2, _0x445b3b);
            }
            _0x4295a0[_0x3e8045(0x192)](_0x82cc79, (_0x691fa4 = _0x691fa4[_0x3e8045(0x19f)](_0xa0623a, _0x385177 || []))[_0x3e8045(0x151)]());
        });
    }, __importDefault = this && this[_0x236b96(0x161) + _0x236b96(0x144)] || function (_0x3fd2be) {
        const _0xef29e9 = _0x236b96;
        return _0x3fd2be && _0x3fd2be[_0xef29e9(0x158)] ? _0x3fd2be : { 'default': _0x3fd2be };
    };
const _0x56f7b8 = {};
_0x56f7b8[_0x236b96(0x179)] = !![], Object[_0x236b96(0x176) + _0x236b96(0x135)](exports, _0x236b96(0x158), _0x56f7b8);
const axios_1 = __importDefault(require(_0x236b96(0x16f))), TicketZPRO_1 = __importDefault(require(_0x236b96(0x19e) + _0x236b96(0x136) + _0x236b96(0x149))), MessageZPRO_1 = __importDefault(require(_0x236b96(0x19e) + _0x236b96(0x17a) + _0x236b96(0x156))), socketEmitZPRO_1 = __importDefault(require(_0x236b96(0x197) + _0x236b96(0x14b) + _0x236b96(0x165))), AppErrorZPRO_1 = __importDefault(require(_0x236b96(0x18d) + _0x236b96(0x15a) + _0x236b96(0x13f))), loggerZPRO_1 = require(_0x236b96(0x15d) + _0x236b96(0x147) + 'RO');
class SendTemplateMessage {
    [_0x236b96(0x174) + _0x236b96(0x189)]({
        from: _0xad9ee,
        phone_number_id: _0x3c29c9,
        message: _0x33ed57,
        ticket: _0x119d69,
        tenantId: _0x5af267,
        idFront: _0x1240de,
        whatsapp: _0x15bbba,
        language: _0x5a6878,
        templateName: _0x4bf089
    }) {
        const _0x583e8d = _0x236b96, _0x1d74da = {
                'pAagL': function (_0x203bc9, _0x1a2084) {
                    return _0x203bc9 !== _0x1a2084;
                },
                'VNLGU': _0x583e8d(0x18f),
                'IWPRu': _0x583e8d(0x178) + _0x583e8d(0x171),
                'ULzSg': function (_0x419218, _0x88585a) {
                    return _0x419218 === _0x88585a;
                },
                'WeftC': function (_0x43f0bc, _0x2bf294) {
                    return _0x43f0bc === _0x2bf294;
                },
                'oUCUE': _0x583e8d(0x19c),
                'UuMYD': _0x583e8d(0x191),
                'NOWFJ': _0x583e8d(0x130),
                'LMbkG': _0x583e8d(0x12b) + _0x583e8d(0x187),
                'Vicgt': function (_0x44edb0, _0x1f6596) {
                    return _0x44edb0 || _0x1f6596;
                },
                'qsMrI': _0x583e8d(0x190),
                'QuAPS': _0x583e8d(0x199),
                'ETGOO': _0x583e8d(0x12d) + _0x583e8d(0x155),
                'zojAu': _0x583e8d(0x14c),
                'vzskd': _0x583e8d(0x17c) + _0x583e8d(0x143) + _0x583e8d(0x193) + _0x583e8d(0x12c) + _0x583e8d(0x15b),
                'Aidfc': function (_0x4e8737, _0x5dc4f5, _0x2db66d, _0x3c18dd, _0x450c27) {
                    return _0x4e8737(_0x5dc4f5, _0x2db66d, _0x3c18dd, _0x450c27);
                }
            };
        return _0x1d74da[_0x583e8d(0x14a)](__awaiter, this, void (-0x47f * -0x1 + 0x3 * -0xa0c + 0x19a5 * 0x1), void (-0x11b * -0x1 + 0xe98 + -0x1 * 0xfb3), function* () {
            const _0x874a07 = _0x583e8d;
            if (_0x1d74da[_0x874a07(0x184)](_0x15bbba[_0x874a07(0x196)], _0x1d74da[_0x874a07(0x14d)]))
                throw new AppErrorZPRO_1[(_0x874a07(0x17e))](_0x1d74da[_0x874a07(0x173)], -0x67 * -0x53 + 0x232f * 0x1 + 0x4304 * -0x1);
            try {
                const _0x204bdf = _0x874a07(0x129) + _0x874a07(0x19b) + _0x874a07(0x17b) + (_0x1d74da[_0x874a07(0x16c)](_0x15bbba, null) || _0x1d74da[_0x874a07(0x132)](_0x15bbba, void (-0x4a * 0x6b + 0xf76 + 0xf78)) ? void (0x182 * 0x4 + -0x1 * -0x11b3 + -0x17bb) : _0x15bbba[_0x874a07(0x17d) + 'n']) + '/' + _0x3c29c9 + (_0x874a07(0x19d) + _0x874a07(0x182) + _0x874a07(0x137)) + (_0x1d74da[_0x874a07(0x132)](_0x15bbba, null) || _0x1d74da[_0x874a07(0x132)](_0x15bbba, void (0x3 * -0xc0e + 0x3d1 * 0x1 + 0x2059)) ? void (0x1aaa * 0x1 + 0x11 * -0xeb + 0x95 * -0x13) : _0x15bbba[_0x874a07(0x185)]), _0x2a7774 = {};
                _0x2a7774[_0x874a07(0x150)] = _0x5a6878;
                const _0xb7cc36 = {};
                _0xb7cc36[_0x874a07(0x180)] = _0x4bf089, _0xb7cc36[_0x874a07(0x19a)] = _0x2a7774;
                const _0x11d770 = {};
                _0x11d770[_0x874a07(0x188)] = _0x1d74da[_0x874a07(0x18e)], _0x11d770[_0x874a07(0x164)] = _0x204bdf, _0x11d770[_0x874a07(0x167)] = {}, _0x11d770[_0x874a07(0x181)] = {}, _0x11d770[_0x874a07(0x167)][_0x874a07(0x134) + _0x874a07(0x168)] = _0x1d74da[_0x874a07(0x14e)], _0x11d770[_0x874a07(0x167)]['to'] = _0xad9ee, _0x11d770[_0x874a07(0x167)][_0x874a07(0x14f)] = _0x1d74da[_0x874a07(0x153)], _0x11d770[_0x874a07(0x167)][_0x874a07(0x130)] = _0xb7cc36, _0x11d770[_0x874a07(0x181)][_0x874a07(0x175) + 'pe'] = _0x1d74da[_0x874a07(0x16b)];
                const _0x326eeb = yield (0x229b + 0xd6 * 0xb + -0x1 * 0x2bcd, axios_1[_0x874a07(0x17e)])(_0x11d770);
                let _0x2e8d5b = Date[_0x874a07(0x12f)]();
                const _0x2793e7 = {
                        'messageId': _0x326eeb[_0x874a07(0x167)][_0x874a07(0x16a)][-0x142b + 0x1d * -0x47 + 0x1c36]['id'] || '',
                        'ticketId': _0x119d69['id'],
                        'contactId': _0x119d69[_0x874a07(0x12a)]['id'],
                        'body': _0x1d74da[_0x874a07(0x146)](_0x33ed57, ''),
                        'fromMe': !![],
                        'mediaType': _0x1d74da[_0x874a07(0x13c)],
                        'read': !![],
                        'ack': 0x2,
                        'timestamp': _0x2e8d5b,
                        'status': _0x1d74da[_0x874a07(0x162)]
                    }, _0x4c2474 = {};
                _0x4c2474['id'] = _0x119d69['id'];
                const _0x1108b1 = {};
                _0x1108b1[_0x874a07(0x145)] = _0x4c2474;
                const _0x308f64 = yield TicketZPRO_1[_0x874a07(0x17e)][_0x874a07(0x18a)](_0x1108b1);
                if (!_0x308f64)
                    return;
                yield _0x308f64[_0x874a07(0x172)]({
                    'lastMessage': _0x2793e7[_0x874a07(0x177)],
                    'lastMessageAt': new Date()[_0x874a07(0x133)](),
                    'answered': _0x326eeb[_0x874a07(0x167)][_0x874a07(0x13e)] || ![]
                });
                const _0xf1651e = {};
                _0xf1651e[_0x874a07(0x13a)] = _0x1240de, _0xf1651e[_0x874a07(0x198)] = _0x5af267;
                const _0x27e898 = {};
                _0x27e898[_0x874a07(0x145)] = _0xf1651e;
                const _0x109970 = yield MessageZPRO_1[_0x874a07(0x17e)][_0x874a07(0x18a)](_0x27e898);
                if (!_0x109970)
                    return;
                const _0xe2b68e = {};
                _0xe2b68e[_0x874a07(0x159)] = _0x326eeb[_0x874a07(0x167)][_0x874a07(0x16a)][0x316 * 0x3 + 0x32b * -0xb + 0x1997]['id'], _0xe2b68e[_0x874a07(0x140)] = _0x1d74da[_0x874a07(0x13c)], _0xe2b68e[_0x874a07(0x1a0)] = 0x2, _0xe2b68e[_0x874a07(0x196)] = _0x1d74da[_0x874a07(0x162)], yield _0x109970[_0x874a07(0x172)](_0xe2b68e);
                const _0x26147b = {};
                _0x26147b[_0x874a07(0x198)] = _0x5af267, _0x26147b[_0x874a07(0x14f)] = _0x1d74da[_0x874a07(0x183)], _0x26147b[_0x874a07(0x16e)] = _0x119d69, (-0x744 + 0x1 * 0x114b + -0xa07, socketEmitZPRO_1[_0x874a07(0x17e)])(_0x26147b);
                const _0x36470c = {};
                _0x36470c[_0x874a07(0x159)] = _0x326eeb[_0x874a07(0x167)][_0x874a07(0x16a)][0x1 * -0xacd + -0x4e6 + 0x1 * 0xfb3]['id'], _0x36470c[_0x874a07(0x198)] = _0x5af267;
                const _0x3c9c6a = {};
                _0x3c9c6a[_0x874a07(0x145)] = _0x36470c;
                const _0x5b1d56 = yield MessageZPRO_1[_0x874a07(0x17e)][_0x874a07(0x18a)](_0x3c9c6a);
                if (!_0x5b1d56)
                    return;
                const _0x22271a = {};
                return _0x22271a[_0x874a07(0x198)] = _0x5af267, _0x22271a[_0x874a07(0x14f)] = _0x1d74da[_0x874a07(0x16d)], _0x22271a[_0x874a07(0x16e)] = _0x5b1d56, (0x14cc + 0x88e + 0x2 * -0xead, socketEmitZPRO_1[_0x874a07(0x17e)])(_0x22271a), _0x326eeb[_0x874a07(0x167)];
            } catch (_0x1d018a) {
                loggerZPRO_1[_0x874a07(0x169)][_0x874a07(0x170)](_0x1d74da[_0x874a07(0x160)]);
                throw _0x1d018a;
            }
        });
    }
}
exports[_0x236b96(0x17e)] = SendTemplateMessage;