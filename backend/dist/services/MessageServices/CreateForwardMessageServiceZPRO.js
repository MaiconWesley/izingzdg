'use strict';
const _0xce3fa3 = _0x2522;
(function (_0x2df4b6, _0x19db68) {
    const _0x1f7f1b = _0x2522, _0x20ec4c = _0x2df4b6();
    while (!![]) {
        try {
            const _0xc7a0a4 = parseInt(_0x1f7f1b(0x197)) / (0x55 * -0x23 + 0xb * 0xe3 + 0x1df * 0x1) + -parseInt(_0x1f7f1b(0x1b3)) / (0x7 * 0x1 + 0x1f4f + -0x1f54) + parseInt(_0x1f7f1b(0x1b0)) / (0xc6a + -0xb66 + 0x1 * -0x101) + -parseInt(_0x1f7f1b(0x1bd)) / (0x8c8 + 0x1 * -0x2485 + 0x1bc1) * (-parseInt(_0x1f7f1b(0x1bf)) / (0x2 * -0x292 + 0x770 + 0x35 * -0xb)) + parseInt(_0x1f7f1b(0x1c4)) / (0x1 * 0x1aa1 + 0x1834 + -0x32cf) * (-parseInt(_0x1f7f1b(0x1d6)) / (0x1 * 0x191e + -0x187e + 0x9 * -0x11)) + -parseInt(_0x1f7f1b(0x189)) / (0x1537 + 0x1fe3 + -0x3512) + -parseInt(_0x1f7f1b(0x191)) / (-0xe57 * -0x1 + 0x19ff * 0x1 + -0xb5 * 0x39) * (-parseInt(_0x1f7f1b(0x1d9)) / (-0x1fc8 + -0x95b * -0x1 + 0x1677));
            if (_0xc7a0a4 === _0x19db68)
                break;
            else
                _0x20ec4c['push'](_0x20ec4c['shift']());
        } catch (_0x4591fb) {
            _0x20ec4c['push'](_0x20ec4c['shift']());
        }
    }
}(_0x5604, -0x401d4 + -0xb836 + 0x8ef23));
var __awaiter = this && this[_0xce3fa3(0x1b8)] || function (_0x51f89c, _0x5eebfb, _0x484c91, _0x541198) {
        const _0x3ab336 = _0xce3fa3, _0x4ba8cc = {
                'Wtuan': function (_0x399b32, _0x1b7ad8) {
                    return _0x399b32(_0x1b7ad8);
                },
                'BQxOJ': function (_0x9703f7, _0x5218d0) {
                    return _0x9703f7 instanceof _0x5218d0;
                },
                'LHltq': function (_0x507e11, _0x5a8ddd) {
                    return _0x507e11(_0x5a8ddd);
                },
                'IziGy': function (_0x3d8d68, _0x58b76c) {
                    return _0x3d8d68(_0x58b76c);
                },
                'mwoAn': function (_0x84395e, _0x47ccc5) {
                    return _0x84395e(_0x47ccc5);
                },
                'krEeD': _0x3ab336(0x1d5),
                'AuuDh': function (_0x29a656, _0x4c5c08) {
                    return _0x29a656(_0x4c5c08);
                }
            };
        function _0x1e92a2(_0x484abf) {
            const _0x1786a5 = _0x3ab336, _0x1bd78e = {
                    'hKHJq': function (_0x3fc150, _0x101cc5) {
                        const _0x33dd45 = _0x2522;
                        return _0x4ba8cc[_0x33dd45(0x1a7)](_0x3fc150, _0x101cc5);
                    }
                };
            return _0x4ba8cc[_0x1786a5(0x1cd)](_0x484abf, _0x484c91) ? _0x484abf : new _0x484c91(function (_0x39d4b2) {
                const _0xe0b31a = _0x1786a5;
                _0x1bd78e[_0xe0b31a(0x1a8)](_0x39d4b2, _0x484abf);
            });
        }
        return new (_0x484c91 || (_0x484c91 = Promise))(function (_0x1ea697, _0x268284) {
            const _0x3e04ea = _0x3ab336, _0x15b47d = {
                    'Grlwt': function (_0x5a9fe5, _0x2646a2) {
                        const _0x20834f = _0x2522;
                        return _0x4ba8cc[_0x20834f(0x1a7)](_0x5a9fe5, _0x2646a2);
                    },
                    'Fhieg': _0x4ba8cc[_0x3e04ea(0x1b9)]
                };
            function _0x41c47c(_0x3c6af1) {
                const _0xaa5e4 = _0x3e04ea;
                try {
                    _0x4ba8cc[_0xaa5e4(0x1a7)](_0xdce46b, _0x541198[_0xaa5e4(0x1af)](_0x3c6af1));
                } catch (_0x3615d4) {
                    _0x4ba8cc[_0xaa5e4(0x184)](_0x268284, _0x3615d4);
                }
            }
            function _0x204d8f(_0xf80667) {
                const _0x5418fe = _0x3e04ea;
                try {
                    _0x15b47d[_0x5418fe(0x1ba)](_0xdce46b, _0x541198[_0x15b47d[_0x5418fe(0x1cc)]](_0xf80667));
                } catch (_0x23a93a) {
                    _0x15b47d[_0x5418fe(0x1ba)](_0x268284, _0x23a93a);
                }
            }
            function _0xdce46b(_0x2e900c) {
                const _0x2d0695 = _0x3e04ea;
                _0x2e900c[_0x2d0695(0x1d3)] ? _0x4ba8cc[_0x2d0695(0x1b2)](_0x1ea697, _0x2e900c[_0x2d0695(0x18f)]) : _0x4ba8cc[_0x2d0695(0x1ce)](_0x1e92a2, _0x2e900c[_0x2d0695(0x18f)])[_0x2d0695(0x1c2)](_0x41c47c, _0x204d8f);
            }
            _0x4ba8cc[_0x3e04ea(0x1bc)](_0xdce46b, (_0x541198 = _0x541198[_0x3e04ea(0x1cb)](_0x51f89c, _0x5eebfb || []))[_0x3e04ea(0x1af)]());
        });
    }, __importDefault = this && this[_0xce3fa3(0x1d0) + _0xce3fa3(0x1a0)] || function (_0xa94369) {
        const _0x5e51a7 = _0xce3fa3;
        return _0xa94369 && _0xa94369[_0x5e51a7(0x1cf)] ? _0xa94369 : { 'default': _0xa94369 };
    };
function _0x2522(_0x3e24fa, _0x243745) {
    const _0x324659 = _0x5604();
    return _0x2522 = function (_0x2087b4, _0x422548) {
        _0x2087b4 = _0x2087b4 - (-0x4 * 0x6b5 + 0x101 * -0x1d + -0x1327 * -0x3);
        let _0x43b78e = _0x324659[_0x2087b4];
        return _0x43b78e;
    }, _0x2522(_0x3e24fa, _0x243745);
}
const _0x5892cd = {};
_0x5892cd[_0xce3fa3(0x18f)] = !![], Object[_0xce3fa3(0x1c7) + _0xce3fa3(0x190)](exports, _0xce3fa3(0x1cf), _0x5892cd);
const sequelize_1 = require(_0xce3fa3(0x1be)), socketEmitZPRO_1 = __importDefault(require(_0xce3fa3(0x1a6) + _0xce3fa3(0x1c6) + _0xce3fa3(0x1c3))), MessageZPRO_1 = __importDefault(require(_0xce3fa3(0x195) + _0xce3fa3(0x18a) + _0xce3fa3(0x198))), TicketZPRO_1 = __importDefault(require(_0xce3fa3(0x195) + _0xce3fa3(0x1a4) + _0xce3fa3(0x193))), ShowTicketServiceZPRO_1 = __importDefault(require(_0xce3fa3(0x1b7) + _0xce3fa3(0x1b6) + _0xce3fa3(0x18e) + _0xce3fa3(0x19b))), CreateForwardMessageService = ({
        userId: _0x301c74,
        tenantId: _0x4bdb3c,
        message: _0x341ef6,
        contact: _0x59d777,
        ticketIdOrigin: _0x2f5fce
    }) => __awaiter(void (0x24 * -0x57 + 0x242 * -0x1 + 0x7 * 0x212), void (0x2385 + 0x1 * 0xb71 + -0x2ef6), void (-0xc55 * 0x1 + -0x1993 + 0x25e8), function* () {
        const _0x330197 = _0xce3fa3, _0x4812f9 = {};
        _0x4812f9[_0x330197(0x186)] = _0x330197(0x194), _0x4812f9[_0x330197(0x1a3)] = _0x330197(0x1a5), _0x4812f9[_0x330197(0x1d7)] = function (_0x80fa47, _0xae91f2) {
            return _0x80fa47 === _0xae91f2;
        }, _0x4812f9[_0x330197(0x185)] = function (_0x1bb5e0, _0x4c1abf) {
            return _0x1bb5e0 === _0x4c1abf;
        }, _0x4812f9[_0x330197(0x1d2)] = function (_0x3f69c2, _0x2ce52a) {
            return _0x3f69c2 === _0x2ce52a;
        }, _0x4812f9[_0x330197(0x1aa)] = function (_0x3ebefe, _0x35b883) {
            return _0x3ebefe === _0x35b883;
        }, _0x4812f9[_0x330197(0x1d1)] = _0x330197(0x18b), _0x4812f9[_0x330197(0x1ac)] = _0x330197(0x1c9), _0x4812f9[_0x330197(0x1a2)] = _0x330197(0x188), _0x4812f9[_0x330197(0x19a)] = _0x330197(0x196), _0x4812f9[_0x330197(0x1b4)] = _0x330197(0x1bb) + _0x330197(0x1b5) + _0x330197(0x18c), _0x4812f9[_0x330197(0x1ab)] = _0x330197(0x1c1) + 'e';
        const _0xfab645 = _0x4812f9, _0x2dc1f1 = {};
        _0x2dc1f1['id'] = _0x2f5fce, _0x2dc1f1[_0x330197(0x192)] = _0x4bdb3c;
        const _0x545999 = yield (0xd4f * 0x2 + -0x2266 + -0x14c * -0x6, ShowTicketServiceZPRO_1[_0x330197(0x1ca)])(_0x2dc1f1);
        let _0x318907;
        const _0x52c96f = {
                [sequelize_1['Op']['or']]: [
                    _0xfab645[_0x330197(0x186)],
                    _0xfab645[_0x330197(0x1a3)]
                ]
            }, _0x5b0ce4 = {};
        _0x5b0ce4[_0x330197(0x19c)] = _0x52c96f, _0x5b0ce4[_0x330197(0x192)] = _0x4bdb3c, _0x5b0ce4[_0x330197(0x1c5)] = _0x59d777['id'];
        const _0x291ce4 = {};
        _0x291ce4[_0x330197(0x1d8)] = _0x5b0ce4, _0x318907 = yield TicketZPRO_1[_0x330197(0x1ca)][_0x330197(0x199)](_0x291ce4);
        !_0x318907 && (_0x318907 = yield TicketZPRO_1[_0x330197(0x1ca)][_0x330197(0x18d)]({
            'contactId': _0x59d777['id'],
            'status': _0xfab645[_0x330197(0x186)],
            'isGroup': _0x59d777[_0x330197(0x1b1)],
            'userId': _0x301c74,
            'tenantId': _0x4bdb3c,
            'unreadMessages': 0x0,
            'whatsappId': _0x545999[_0x330197(0x1d4)],
            'lastMessage': _0x341ef6[_0x330197(0x1c8)],
            'lastMessageAt': new Date()[_0x330197(0x19d)](),
            'answered': !![]
        }));
        const _0x56b158 = {
                'body': _0x341ef6[_0x330197(0x1c8)],
                'contactId': _0x59d777['id'],
                'fromMe': !![],
                'read': !![],
                'mediaType': _0xfab645[_0x330197(0x1d7)](_0x341ef6, null) || _0xfab645[_0x330197(0x1d7)](_0x341ef6, void (0x17f7 + 0x110c * -0x1 + -0x6eb)) ? void (0x1 * -0x1867 + 0x29b + 0x15cc) : _0x341ef6[_0x330197(0x1a1)],
                'mediaUrl': _0xfab645[_0x330197(0x1d7)](_0x341ef6, null) || _0xfab645[_0x330197(0x185)](_0x341ef6, void (-0x469 + 0x656 + -0x1 * 0x1ed)) ? void (-0x1 * 0x15a + -0x13 * 0x1f5 + -0x7b5 * -0x5) : _0x341ef6[_0x330197(0x187)],
                'mediaName': _0xfab645[_0x330197(0x1d2)](_0x341ef6, null) || _0xfab645[_0x330197(0x1aa)](_0x341ef6, void (0x10a8 + 0x140 + -0x11e8)) ? void (0x1 * 0x1c36 + -0x2260 + 0x62a) : _0x341ef6[_0x330197(0x187)],
                'timestamp': new Date()[_0x330197(0x19d)](),
                'userId': _0x301c74,
                'scheduleDate': null,
                'sendType': _0xfab645[_0x330197(0x1d1)],
                'status': _0xfab645[_0x330197(0x1a3)],
                'ticketId': _0x318907['id'],
                'tenantId': _0x4bdb3c
            }, _0x2908ac = yield MessageZPRO_1[_0x330197(0x1ca)][_0x330197(0x18d)](_0x56b158), _0x478868 = {};
        _0x478868[_0x330197(0x192)] = _0x4bdb3c;
        const _0x191cc4 = {};
        _0x191cc4[_0x330197(0x1a9)] = TicketZPRO_1[_0x330197(0x1ca)], _0x191cc4['as'] = _0xfab645[_0x330197(0x1ac)], _0x191cc4[_0x330197(0x1d8)] = _0x478868, _0x191cc4[_0x330197(0x1ae)] = [_0xfab645[_0x330197(0x1a2)]];
        const _0x1f7b81 = yield MessageZPRO_1[_0x330197(0x1ca)][_0x330197(0x1c0)](_0x2908ac['id'], {
            'include': [
                _0x191cc4,
                {
                    'model': MessageZPRO_1[_0x330197(0x1ca)],
                    'as': _0xfab645[_0x330197(0x19a)],
                    'include': [_0xfab645[_0x330197(0x1a2)]]
                }
            ]
        });
        if (!_0x1f7b81)
            throw new Error(_0xfab645[_0x330197(0x1b4)]);
        yield _0x318907[_0x330197(0x19f)]({
            'lastMessage': _0x1f7b81[_0x330197(0x1c8)],
            'lastMessageAt': new Date()[_0x330197(0x19d)](),
            'answered': !![]
        });
        const _0x3e0ecf = {};
        _0x3e0ecf[_0x330197(0x192)] = _0x4bdb3c, _0x3e0ecf[_0x330197(0x19e)] = _0xfab645[_0x330197(0x1ab)], _0x3e0ecf[_0x330197(0x1ad)] = _0x1f7b81, (-0xa * -0xc7 + -0xa85 * 0x2 + -0x1 * -0xd44, socketEmitZPRO_1[_0x330197(0x1ca)])(_0x3e0ecf);
    });
exports[_0xce3fa3(0x1ca)] = CreateForwardMessageService;
function _0x5604() {
    const _0x5d5af8 = [
        'throw',
        '1577688iXyMqi',
        'ulBko',
        'where',
        '175460WEyyDZ',
        'LHltq',
        'cgGmm',
        'pZUGX',
        'mediaName',
        'contact',
        '2278504acmuup',
        'ls/Message',
        'chat',
        '_SYSTEM',
        'create',
        'owTicketSe',
        'value',
        'erty',
        '63NGkXyu',
        'tenantId',
        'PRO',
        'open',
        '../../mode',
        'quotedMsg',
        '177280BOVfrN',
        'ZPRO',
        'findOne',
        'AKtSH',
        'rviceZPRO',
        'status',
        'getTime',
        'type',
        'update',
        'fault',
        'mediaType',
        'PGNwM',
        'bYGEy',
        'ls/TicketZ',
        'pending',
        '../../help',
        'Wtuan',
        'hKHJq',
        'model',
        'cYWLp',
        'zAoCG',
        'kjaap',
        'payload',
        'include',
        'next',
        '1499154bxfkPX',
        'isGroup',
        'IziGy',
        '558876xRjTqB',
        'pvJvC',
        'NG_MESSAGE',
        'ervices/Sh',
        '../TicketS',
        '__awaiter',
        'krEeD',
        'Grlwt',
        'ERR_CREATI',
        'AuuDh',
        '66388eVSlYI',
        'sequelize',
        '80ZOSeNt',
        'findByPk',
        'chat:creat',
        'then',
        'EmitZPRO',
        '6sVciaR',
        'contactId',
        'ers/socket',
        'defineProp',
        'body',
        'ticket',
        'default',
        'apply',
        'Fhieg',
        'BQxOJ',
        'mwoAn',
        '__esModule',
        '__importDe',
        'lMock',
        'roBqF',
        'done',
        'whatsappId'
    ];
    _0x5604 = function () {
        return _0x5d5af8;
    };
    return _0x5604();
}