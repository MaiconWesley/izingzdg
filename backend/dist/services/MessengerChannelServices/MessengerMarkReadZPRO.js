'use strict';
const _0x2fae5d = _0x4fed;
(function (_0x276a75, _0x43935e) {
    const _0x4832c4 = _0x4fed, _0x390e6e = _0x276a75();
    while (!![]) {
        try {
            const _0x414fc1 = -parseInt(_0x4832c4(0x181)) / (0x1578 * -0x1 + -0x22b * 0x5 + 0x2050) * (-parseInt(_0x4832c4(0x15a)) / (-0x1089 + 0x50d + 0xb7e)) + -parseInt(_0x4832c4(0x163)) / (-0x1fba + -0x1fca + 0x3f87) + parseInt(_0x4832c4(0x18a)) / (0x7b * -0x3b + -0xfeb + 0x2c48) + -parseInt(_0x4832c4(0x192)) / (0xb2f + -0x1b * -0x106 + -0x26cc) * (-parseInt(_0x4832c4(0x177)) / (-0x26d2 + 0x199c + -0x2c * -0x4d)) + parseInt(_0x4832c4(0x169)) / (0x1753 + -0x25cb + 0xe7f * 0x1) + -parseInt(_0x4832c4(0x160)) / (-0x1d77 + 0x2e * -0xd3 + -0x4369 * -0x1) * (parseInt(_0x4832c4(0x186)) / (0x1584 + -0x1bfc + 0x681)) + -parseInt(_0x4832c4(0x182)) / (-0x1032 + 0x65 * 0x59 + -0x12e1) * (parseInt(_0x4832c4(0x171)) / (-0x12a1 + -0x1858 + 0xac1 * 0x4));
            if (_0x414fc1 === _0x43935e)
                break;
            else
                _0x390e6e['push'](_0x390e6e['shift']());
        } catch (_0x446047) {
            _0x390e6e['push'](_0x390e6e['shift']());
        }
    }
}(_0x52c8, -0x1 * 0x289af + -0x2a8f2 + 0x10f184));
var __awaiter = this && this[_0x2fae5d(0x164)] || function (_0x32ad18, _0x3920d4, _0x4b0f34, _0x77a2bb) {
        const _0x2b1adf = _0x2fae5d, _0x441ef6 = {
                'KQvCo': function (_0x3cc5a6, _0x45af70) {
                    return _0x3cc5a6(_0x45af70);
                },
                'FlIZo': function (_0x515d73, _0x130489) {
                    return _0x515d73 instanceof _0x130489;
                },
                'fMJnD': function (_0x558802, _0xe754dd) {
                    return _0x558802(_0xe754dd);
                },
                'ysBRN': _0x2b1adf(0x190),
                'SNLEr': function (_0x26751e, _0x402d2f) {
                    return _0x26751e(_0x402d2f);
                },
                'sArfy': function (_0x5352f1, _0x12316d) {
                    return _0x5352f1(_0x12316d);
                },
                'pIMIq': function (_0x5dffc1, _0x59a2f4) {
                    return _0x5dffc1(_0x59a2f4);
                }
            };
        function _0x555494(_0x4c1149) {
            const _0x18d847 = _0x2b1adf, _0x28b08e = {
                    'ZeuSo': function (_0x2b0f5f, _0x5bf394) {
                        const _0x31b82c = _0x4fed;
                        return _0x441ef6[_0x31b82c(0x178)](_0x2b0f5f, _0x5bf394);
                    }
                };
            return _0x441ef6[_0x18d847(0x180)](_0x4c1149, _0x4b0f34) ? _0x4c1149 : new _0x4b0f34(function (_0x306201) {
                const _0xd237b1 = _0x18d847;
                _0x28b08e[_0xd237b1(0x168)](_0x306201, _0x4c1149);
            });
        }
        return new (_0x4b0f34 || (_0x4b0f34 = Promise))(function (_0xc7ddd5, _0x56fff5) {
            const _0x4393f5 = _0x2b1adf, _0x2ab575 = {
                    'Bypxh': function (_0x1dad72, _0x35ed58) {
                        const _0x30887a = _0x4fed;
                        return _0x441ef6[_0x30887a(0x15b)](_0x1dad72, _0x35ed58);
                    },
                    'Ajuav': function (_0x556a6e, _0x46638a) {
                        const _0x1bf07d = _0x4fed;
                        return _0x441ef6[_0x1bf07d(0x15e)](_0x556a6e, _0x46638a);
                    },
                    'ECbkL': function (_0x5d64d1, _0x1b1de6) {
                        const _0xc88c8 = _0x4fed;
                        return _0x441ef6[_0xc88c8(0x159)](_0x5d64d1, _0x1b1de6);
                    }
                };
            function _0x39e2c7(_0x1fc795) {
                const _0x9eeb8 = _0x4fed;
                try {
                    _0x2ab575[_0x9eeb8(0x18b)](_0x4c2454, _0x77a2bb[_0x9eeb8(0x179)](_0x1fc795));
                } catch (_0x416227) {
                    _0x2ab575[_0x9eeb8(0x17e)](_0x56fff5, _0x416227);
                }
            }
            function _0x2f8535(_0x22c9e3) {
                const _0x4320f6 = _0x4fed;
                try {
                    _0x441ef6[_0x4320f6(0x15e)](_0x4c2454, _0x77a2bb[_0x441ef6[_0x4320f6(0x189)]](_0x22c9e3));
                } catch (_0x2d6e22) {
                    _0x441ef6[_0x4320f6(0x15e)](_0x56fff5, _0x2d6e22);
                }
            }
            function _0x4c2454(_0x5c0733) {
                const _0x80e81b = _0x4fed;
                _0x5c0733[_0x80e81b(0x173)] ? _0x2ab575[_0x80e81b(0x18b)](_0xc7ddd5, _0x5c0733[_0x80e81b(0x188)]) : _0x2ab575[_0x80e81b(0x161)](_0x555494, _0x5c0733[_0x80e81b(0x188)])[_0x80e81b(0x18f)](_0x39e2c7, _0x2f8535);
            }
            _0x441ef6[_0x4393f5(0x162)](_0x4c2454, (_0x77a2bb = _0x77a2bb[_0x4393f5(0x170)](_0x32ad18, _0x3920d4 || []))[_0x4393f5(0x179)]());
        });
    }, __importDefault = this && this[_0x2fae5d(0x183) + _0x2fae5d(0x18d)] || function (_0x787fd7) {
        const _0x42441a = _0x2fae5d;
        return _0x787fd7 && _0x787fd7[_0x42441a(0x17b)] ? _0x787fd7 : { 'default': _0x787fd7 };
    };
function _0x4fed(_0x11b9af, _0x36e8b2) {
    const _0x311e22 = _0x52c8();
    return _0x4fed = function (_0x3eb9d4, _0x2dbe91) {
        _0x3eb9d4 = _0x3eb9d4 - (0x1a1 * -0x13 + 0x11c3 + -0x1 * -0xe84);
        let _0xa8179e = _0x311e22[_0x3eb9d4];
        return _0xa8179e;
    }, _0x4fed(_0x11b9af, _0x36e8b2);
}
const _0x599219 = {};
_0x599219[_0x2fae5d(0x188)] = !![], Object[_0x2fae5d(0x16f) + _0x2fae5d(0x174)](exports, _0x2fae5d(0x17b), _0x599219);
const sequelize_1 = require(_0x2fae5d(0x16e)), socketEmitZPRO_1 = __importDefault(require(_0x2fae5d(0x15c) + _0x2fae5d(0x191) + _0x2fae5d(0x158))), ContactZPRO_1 = __importDefault(require(_0x2fae5d(0x15f) + _0x2fae5d(0x18e) + _0x2fae5d(0x17d))), MessageZPRO_1 = __importDefault(require(_0x2fae5d(0x15f) + _0x2fae5d(0x16b) + _0x2fae5d(0x17d))), TicketZPRO_1 = __importDefault(require(_0x2fae5d(0x15f) + _0x2fae5d(0x185) + _0x2fae5d(0x17f))), MessengerMarkRead = (_0x325e08, _0x11347e) => __awaiter(void (0x1633 * -0x1 + -0x10 * -0x19f + 0x13f * -0x3), void (-0xa64 + -0x1d0 * 0x10 + -0x4 * -0x9d9), void (-0x1949 + -0x1 * -0x1a5 + 0x17a4), function* () {
        const _0x1ba301 = _0x2fae5d, _0x5adf9c = {};
        _0x5adf9c[_0x1ba301(0x155)] = _0x1ba301(0x15d), _0x5adf9c[_0x1ba301(0x187)] = _0x1ba301(0x167);
        const _0x37e356 = _0x5adf9c, _0x1b2a98 = yield MessageZPRO_1[_0x1ba301(0x172)][_0x1ba301(0x154)]({
                'where': {
                    'tenantId': _0x11347e,
                    'createdAt': { [sequelize_1['Op'][_0x1ba301(0x156)]]: new Date(_0x325e08[_0x1ba301(0x16d)][_0x1ba301(0x175)]) },
                    'fromMe': !![],
                    'ack': {
                        [sequelize_1['Op']['in']]: [
                            -0x1071 + 0x45 * 0x61 + -0x9b3,
                            -0x1 * -0xdaf + 0x1c89 + -0x2 * 0x151b
                        ]
                    }
                },
                'include': [{
                        'model': TicketZPRO_1[_0x1ba301(0x172)],
                        'where': { 'tenantId': _0x11347e },
                        'include': [{
                                'model': ContactZPRO_1[_0x1ba301(0x172)],
                                'where': {
                                    'tenantId': _0x11347e,
                                    'messengerId': _0x325e08[_0x1ba301(0x184)]['id']
                                }
                            }]
                    }]
            });
        yield Promise[_0x1ba301(0x17a)](_0x1b2a98[_0x1ba301(0x18c)](_0x4e166a => __awaiter(void (0x969 + 0x1fdb + 0x22c * -0x13), void (-0xd9e + 0x2631 + -0xe9 * 0x1b), void (0x17f2 + 0x2 * 0x165 + -0x1abc), function* () {
            const _0x484fb2 = _0x1ba301, _0x4f70e7 = {};
            _0x4f70e7[_0x484fb2(0x17c)] = 0x3, yield _0x4e166a[_0x484fb2(0x16a)](_0x4f70e7), (-0xd81 * 0x2 + 0x9b * 0x15 + 0xe4b, socketEmitZPRO_1[_0x484fb2(0x172)])({
                'tenantId': _0x11347e,
                'type': _0x37e356[_0x484fb2(0x155)],
                'payload': Object[_0x484fb2(0x166)](Object[_0x484fb2(0x166)]({}, _0x4e166a[_0x484fb2(0x16c)]), {
                    'mediaUrl': _0x4e166a[_0x484fb2(0x176)],
                    'id': _0x4e166a['id'],
                    'timestamp': _0x4e166a[_0x484fb2(0x165)],
                    'messageId': _0x4e166a[_0x484fb2(0x157)],
                    'status': _0x37e356[_0x484fb2(0x187)],
                    'ack': 0x3
                })
            });
        })));
    });
exports[_0x2fae5d(0x172)] = MessengerMarkRead;
function _0x52c8() {
    const _0x2e2b59 = [
        '844445wxyUPX',
        'update',
        'ls/Message',
        'dataValues',
        'read',
        'sequelize',
        'defineProp',
        'apply',
        '187kTTEuz',
        'default',
        'done',
        'erty',
        'watermark',
        'mediaUrl',
        '1975482GRZyWI',
        'KQvCo',
        'next',
        'all',
        '__esModule',
        'ack',
        'ZPRO',
        'Ajuav',
        'PRO',
        'FlIZo',
        '4731MwnRHk',
        '548650MiFfju',
        '__importDe',
        'sender',
        'ls/TicketZ',
        '63081TYfMls',
        'shEsO',
        'value',
        'ysBRN',
        '5402044alaZgQ',
        'Bypxh',
        'map',
        'fault',
        'ls/Contact',
        'then',
        'throw',
        'ers/socket',
        '5HyxeiB',
        'findAll',
        'FHRjr',
        'lte',
        'messageId',
        'EmitZPRO',
        'sArfy',
        '574YOsZfZ',
        'SNLEr',
        '../../help',
        'chat:ack',
        'fMJnD',
        '../../mode',
        '16IhCJtC',
        'ECbkL',
        'pIMIq',
        '4325112IMSnbJ',
        '__awaiter',
        'timestamp',
        'assign',
        'sended',
        'ZeuSo'
    ];
    _0x52c8 = function () {
        return _0x2e2b59;
    };
    return _0x52c8();
}